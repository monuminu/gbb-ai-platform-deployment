import{a5 as Ae,e as se,a as ae,j as e,P as Ht,a6 as Ut,n as qt,S as b,T as Z,d as G,I as X,m as pe,h as _,B as ee,b as kt,N as F,a7 as Yt,t as Be,k as Gt,r as p,C as he,D as ve,a8 as Ke,a9 as _e,o as A,R as Zt,M as $e,v as Fe,y as ye,p as Me,a3 as He,i as Ue,E as Se,aa as be,F as qe,A as we,W as Jt,w as Qt}from"./index-f7c4dfad.js";import{u as Vt}from"./use-params-075b74e1.js";import{h as dt,c as pt,u as Xt}from"./app-gallery-78b50b87.js";import{_ as Ye,a as es,b as Ge,U as Tt,c as It}from"./attach-2-fill-7e40e49b.js";import{S as Le}from"./index-8fda52a8.js";import{u as Ze,o as Ce,g as Je,p as ts}from"./use-messages-scroll-6244af21.js";import{I as ss,C as ht,L as Qe}from"./numeral-b65a1435.js";import"./knowledge-9078246a.js";import{D as ns,C as os,a as is,s as We,G as Ve,b as rs,c as as,d as ls,_ as Xe,K as Rt,T as Pt,e as cs,f as ds,g as ps,h as hs,m as At,i as ms,j as us,k as xs,l as gs,n as fs,o as bs}from"./ChatMessageInputWebPopover-38e1844e.js";import{_ as ws}from"./download-fill-5c117bbb.js";import{D as js,u as et,b as Oe,L as Ne,G as mt}from"./tool-f255544f.js";import{m as De}from"./api-c77678a4.js";import{M as ys}from"./markdown-e1ecb202.js";import{E as Wt}from"./image-f9ea5de7.js";import{G as je}from"./Grid2-f7b90094.js";import{C as $t,a as Lt}from"./confirm-dialog-e205398d.js";import{T as Ss,a as Cs,e as vs,b as ks,c as Ts,u as Is,g as Rs}from"./custom-date-range-picker-998109e2.js";import{_ as tt}from"./close-fill-84c0bbed.js";import{u as Ps}from"./use-double-click-598668f8.js";import{f as As}from"./format-number-ad5a4a25.js";import{T as Ws,a as Pe,F as st,b as $s,c as Ls,d as Ds}from"./file-thumbnail-ebe9c7d7.js";import{T as Dt,L as nt,a as ot}from"./TextField-5cd6dfc4.js";import{u as ke,a as Te}from"./use-light-box-1c577ab5.js";import{_ as zs}from"./round-send-ef8614b3.js";import{v as it}from"./fade-295cf198.js";import{T as rt,a as at}from"./Tabs-e58d3a15.js";import{U as Fs}from"./upload-1fbeb8f8.js";import{D as Os,c as Ns,a as Es,b as ze}from"./DialogContent-12fa3194.js";import{_ as Bs,C as Ks}from"./entry-c0ffc82d.js";import{u as zt,R as Ft}from"./rag-source-dialog-bf54fa9f.js";import"./coming-soon-image-464dfa9d.js";import{M as Ot}from"./preview-multi-file-bce21d5d.js";import{L as Ee}from"./ListItemIcon-eab82116.js";import"./arrow-ios-forward-fill-2d56b1a6.js";import"./SkeletonBoxTable-cedfa69a.js";import"./Radio-50d033bf.js";import"./rhf-autocomplete-204470f7.js";import"./rhf-text-field-2f3dfe59.js";import"./json-string-62cd4b84.js";import"./motion-container-9bab03e7.js";import"./container-3f1c2166.js";import"./transition-bee6630b.js";const ut=1199,fe=96;function _s({insightMessage:t,sourceMessages:i,onCloseCompose:s}){const a=Ae("up","sm"),c=se(),n=ae(!0);return e.jsxs(Ht,{children:[e.jsx(Ut,{open:!0,sx:{zIndex:ut}}),e.jsxs(qt,{sx:{right:0,bottom:0,borderRadius:1,display:"flex",position:"fixed",zIndex:ut+1,m:`${fe}px`,overflow:"hidden",flexDirection:"column",boxShadow:r=>r.customShadows.dropdown,...n.value&&{m:0,right:fe/2,bottom:fe/2,width:`calc(100% - ${fe}px)`,height:`calc(100% - ${fe}px)`}},children:[e.jsxs(b,{direction:"row",alignItems:"center",sx:{bgcolor:"background.neutral",borderBottom:`dashed 1px ${c.palette.divider}`,p:r=>r.spacing(1.5,1,1.5,2)},children:[e.jsx(Z,{variant:"h6",sx:{flexGrow:1},children:"Data Analysis Report"}),e.jsx(G,{onClick:s,children:e.jsx(X,{icon:"mingcute:close-line"})})]}),e.jsxs(je,{container:!0,spacing:1,sx:{height:`calc(100% - ${fe+24}px)`},children:[e.jsx(je,{xs:6,md:6,lg:6,sx:{height:1},children:e.jsx(pe,{sx:{pt:0,height:1},children:e.jsx(b,{spacing:0,flexGrow:1,sx:{p:2},children:i.map(r=>e.jsx(ns,{message:r},r.id))})})}),e.jsx(je,{xs:6,md:6,lg:6,sx:{height:1},children:t&&e.jsx(pe,{sx:{pt:0,height:1},children:e.jsx(_,{sx:{p:3,pr:5},children:e.jsx(ys,{sx:{"& .component-image":{mt:1.5,borderRadius:1},"& code":{wordBreak:"break-word",whiteSpace:"pre-wrap"},"& pre, & pre > code":{py:1,lineHeight:1.75},...!a&&{"& pre, & pre > code":{py:1,lineHeight:1.5,whiteSpace:"pre-wrap"}}},children:t.body})})})})]}),e.jsx(b,{spacing:2,flexGrow:1,sx:{p:2,borderTop:`dashed 1px ${c.palette.divider}`},children:e.jsx(b,{direction:"row",alignItems:"center",justifyContent:"flex-end",children:e.jsxs(b,{direction:"row",alignItems:"center",spacing:1.5,children:[e.jsx(ee,{variant:"contained",color:"inherit",endIcon:e.jsx(X,{icon:"mingcute:download-3-fill"}),children:"Download"}),e.jsx(ee,{variant:"contained",color:"primary",endIcon:e.jsx(X,{icon:"iconamoon:send-fill"}),children:"Share"})]})})})]})]})}function Ms({row:t,selected:i,onSelectRow:s,onDeleteRow:a}){const c=se(),{name:n,size:r,type:d}=t,l=ae(),o=ae(),h=kt(),f=Ps({click:()=>{l.onTrue()},doubleClick:()=>console.info("DOUBLE CLICK")}),C={borderTop:`solid 1px ${F(c.palette.grey[500],.16)}`,borderBottom:`solid 1px ${F(c.palette.grey[500],.16)}`,"&:first-of-type":{borderTopLeftRadius:8,borderBottomLeftRadius:8,borderLeft:`solid 1px ${F(c.palette.grey[500],.16)}`},"&:last-of-type":{borderTopRightRadius:8,borderBottomRightRadius:8,borderRight:`solid 1px ${F(c.palette.grey[500],.16)}`}};return e.jsxs(e.Fragment,{children:[e.jsxs(Ws,{selected:i,sx:{borderRadius:2,[`&.${Yt.selected}, &:hover`]:{backgroundColor:"background.paper",transition:c.transitions.create(["background-color","box-shadow"],{duration:c.transitions.duration.shortest}),"&:hover":{backgroundColor:"background.paper"}},[`& .${Be.root}`]:{...C},...l.value&&{[`& .${Be.root}`]:{...C}}},children:[e.jsx(Pe,{padding:"checkbox",sx:{height:60},children:e.jsx($t,{checked:i,onClick:s})}),e.jsx(Pe,{onClick:f,children:e.jsxs(b,{direction:"row",alignItems:"center",spacing:1.25,sx:{ml:-1.75,mr:-.5},children:[e.jsx(st,{file:d,sx:{width:26,height:26}}),e.jsx(Z,{variant:"inherit",sx:{cursor:"pointer",display:"-webkit-box",overflow:"hidden",textOverflow:"ellipsis",WebkitBoxOrient:"vertical",WebkitLineClamp:2,wordBreak:"break-all"},children:n})]})}),e.jsx(Pe,{onClick:f,sx:{whiteSpace:"nowrap",width:70,minWidth:70,maxWidth:70},children:As(r)}),e.jsx(Pe,{onClick:f,sx:{whiteSpace:"nowrap",width:40,minWidth:40,maxWidth:40},children:d}),e.jsx(Pe,{align:"right",sx:{pr:1,whiteSpace:"nowrap"},children:e.jsx(G,{color:h.open?"inherit":"default",onClick:()=>{o.onTrue(),h.onClose()},children:e.jsx(X,{icon:tt})})})]}),e.jsx(Lt,{open:o.value,onClose:o.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(ee,{variant:"contained",color:"error",onClick:a,children:"Delete"})})]})}const Hs=[{id:"name",label:"Name"},{id:"size",label:"Size",width:70},{id:"type",label:"Type",width:40},{id:"",width:40}];function Us({table:t,tableData:i,notFound:s,onDeleteRow:a,dataFiltered:c}){const n=se(),{dense:r,page:d,order:l,orderBy:o,rowsPerPage:h,selected:f,onSelectRow:C,onSelectAllRows:k,onSort:y,onChangePage:j,onChangeRowsPerPage:g}=t,w=r?58:78;return e.jsxs(e.Fragment,{children:[e.jsx(_,{sx:{position:"relative",m:n.spacing(-2,-3,-3,-3)},children:e.jsx($s,{sx:{p:n.spacing(0,3,0,3)},children:e.jsxs(Ls,{size:r?"small":"medium",sx:{minWidth:160,borderCollapse:"separate",borderSpacing:"0 14px"},children:[e.jsx(Ss,{order:l,checkboxPl:1.25,orderBy:o,headLabel:Hs,rowCount:i.length,numSelected:f.length,onSort:y,onSelectAllRows:T=>k(T,i.map(S=>S.id)),sx:{[`& .${Be.head}`]:{"&:first-of-type":{borderTopLeftRadius:8,borderBottomLeftRadius:8},"&:last-of-type":{borderTopRightRadius:8,borderBottomRightRadius:8}}}}),e.jsxs(Ds,{children:[c.slice(d*h,d*h+h).map(T=>e.jsx(Ms,{row:T,selected:f.includes(T.id),onSelectRow:()=>C(T.id),onDeleteRow:()=>a(T.id)},T.id)),e.jsx(Cs,{height:w,emptyRows:vs(d,h,i.length)}),e.jsx(ks,{notFound:s,sx:{m:-2,borderRadius:1.5,border:`dashed 1px ${n.palette.divider}`}})]})]})})}),e.jsx(Ts,{count:c.length,page:d,rowsPerPage:h,onPageChange:j,onRowsPerPageChange:g,dense:r,sx:{[`& .${Gt.toolbar}`]:{borderTopColor:"transparent"}}})]})}function qs({filters:t,onFilters:i}){const s=p.useCallback(c=>{i("name",c.target.value)},[i]),a=e.jsx(Dt,{size:"small",value:t.name,onChange:s,placeholder:"Search",InputProps:{startAdornment:e.jsx(ss,{position:"start",children:e.jsx(X,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})},sx:{width:{xs:1,md:1}}});return e.jsx(b,{spacing:1,direction:{xs:"column",md:"row"},alignItems:{xs:"flex-end",md:"center"},sx:{width:1},children:a})}function Ys({filters:t,onFilters:i,canReset:s,onResetFilters:a,results:c,...n}){return e.jsxs(b,{spacing:1.5,...n,children:[e.jsxs(_,{sx:{typography:"body2"},children:[e.jsx("strong",{children:c}),e.jsx(_,{component:"span",sx:{color:"text.secondary",ml:.25},children:"results found"})]}),e.jsx(b,{flexGrow:1,spacing:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:s&&e.jsx(ee,{color:"error",onClick:a,startIcon:e.jsx(X,{icon:"gravity-ui:trash-bin",width:18}),children:"Clear"})})]})}const xt={name:"",type:[],startDate:null,endDate:null};function Gs({dataFiles:t,onSetselectedFiles:i}){const s=Is({defaultRowsPerPage:10,defaultDense:!0}),a=ae(),[c,n]=p.useState([]),[r,d]=p.useState(xt),l=Zs({inputData:c,comparator:Rs(s.order,s.orderBy),filters:r}),o=l.slice(s.page*s.rowsPerPage,s.page*s.rowsPerPage+s.rowsPerPage),h=!!r.name||!!r.type.length||!!r.startDate&&!!r.endDate,f=!l.length&&h||!l.length;p.useEffect(()=>{const T=t.map(S=>{var x;return{id:S.path,name:S.path,size:S.size,type:((x=S.path)==null?void 0:x.split(".").pop())||"unknown"}});n(T)},[t]),p.useEffect(()=>{i(s.selected)},[s.selected,i]);const C=p.useCallback((T,S)=>{s.onResetPage(),d(x=>({...x,[T]:S}))},[s]),k=p.useCallback(T=>{const S=c.filter(x=>x.id!==T);n(S),s.onUpdatePageDeleteRow(o.length)},[o.length,s,c]),y=p.useCallback(()=>{const T=c.filter(S=>!s.selected.includes(S.id));n(T),s.onUpdatePageDeleteRows({totalRows:c.length,totalRowsInPage:o.length,totalRowsFiltered:l.length})},[l.length,o.length,s,c]),j=p.useCallback(()=>{d(xt)},[]),g=e.jsx(b,{spacing:2,direction:{xs:"column",md:"row"},alignItems:{xs:"flex-end",md:"center"},children:e.jsx(qs,{filters:r,onFilters:C})}),w=e.jsx(Ys,{filters:r,onResetFilters:j,canReset:h,onFilters:C,results:l.length});return e.jsxs(e.Fragment,{children:[e.jsxs(_,{sx:{px:2.5},children:[e.jsxs(b,{spacing:2.5,sx:{my:{xs:3,md:2}},children:[g,h&&w]}),f?e.jsx(Wt,{filled:!0,title:"No Data",sx:{py:10},imgUrl:"/assets/icons/empty/ic_data.svg"}):e.jsx(Us,{table:s,tableData:c,dataFiltered:l,onDeleteRow:k,notFound:f})]}),e.jsx(Lt,{open:a.value,onClose:a.onFalse,title:"Confirm",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",s.selected.length," "]})," items?"]}),action:e.jsx(ee,{variant:"contained",color:"error",onClick:()=>{y(),a.onFalse()},children:"Delete"})})]})}function Zs({inputData:t,comparator:i,filters:s}){const{name:a}=s,c=t.map((n,r)=>[n,r]);return c.sort((n,r)=>{const d=i(n[0],r[0]);return d!==0?d:n[1]-r[1]}),t=c.map(n=>n[0]),a&&(t=t.filter(n=>n.name.toLowerCase().indexOf(a.toLowerCase())!==-1)),t}const Js=["jpg","gif","png","gif","bmp","svg","webp"],gt=new RegExp(`https.*\\.(${Js.join("|")}).*(?=\\))`,"i"),ft=/!\[.*?\]\((.*?)\)/g;function Qs({conversation:t,onSendQuery:i,selectedCards:s,onSelectCard:a,onOpenReport:c}){const{messagesEndRef:n}=Ze(t.messages),r=t.messages.filter(o=>{if(!o.body)return!1;const h=o.body.match(gt);return!!(h?h[0]:"")}).map(o=>{if(!o.body)return{src:""};const h=o.body.match(gt),f=h?h[0]:"",C=[];let k=ft.exec(o.body);for(;k!==null;)k[1]!==f&&C.push(k[1]),k=ft.exec(o.body);return[{src:f},...C.map(y=>({src:y}))]}).flat();t.messages.forEach(o=>{o.attachments!==void 0&&o.attachments.length>0&&o.attachments.forEach(h=>{r.push({src:h.preview})})});const d=ke(r),l=o=>{d.onOpen(o)};return e.jsxs(e.Fragment,{children:[t.messages.length===0&&e.jsx(_,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"auto",m:2.5},children:e.jsx(Wt,{filled:!0,title:"Start analyzing by",sx:{py:12,width:"100%"},imgUrl:"/assets/icons/empty/ic_analysis.svg",description:"Adding data & asking questions"})}),e.jsx(pe,{ref:n,sx:{pt:2,pb:1,px:2.5,height:"calc(100vh - 286px)"},children:t.messages.map((o,h)=>e.jsx(os,{message:o,conversation:t,onOpenLightbox:l,onSendQuery:i,selected:s.includes(o.id),onSelect:()=>a(o.id),onOpenReport:c},o.id))}),e.jsx(Te,{index:d.selected,slides:r,open:d.open,close:d.onClose})]})}const Vs={width:24,height:24,body:'<g fill="none"><path d="M0 0h24v24H0z"/><path fill="currentColor" d="M14.486 3.143a1 1 0 0 1 .692 1.233l-4.43 15.788a1 1 0 0 1-1.926-.54l4.43-15.788a1 1 0 0 1 1.234-.693ZM7.207 7.05a1 1 0 0 1 0 1.414L3.672 12l3.535 3.535a1 1 0 1 1-1.414 1.415L1.55 12.707a1 1 0 0 1 0-1.414L5.793 7.05a1 1 0 0 1 1.414 0Zm9.586 1.414a1 1 0 1 1 1.414-1.414l4.243 4.243a1 1 0 0 1 0 1.414l-4.243 4.242a1 1 0 0 1-1.414-1.414L20.328 12l-3.535-3.536Z"/></g>'};var lt=Vs;const Xs={width:24,height:24,body:'<path fill="currentColor" d="M8 9q.425 0 .713-.288T9 8q0-.425-.288-.713T8 7q-.425 0-.713.288T7 8q0 .425.288.713T8 9Zm0 4q.425 0 .713-.288T9 12q0-.425-.288-.713T8 11q-.425 0-.713.288T7 12q0 .425.288.713T8 13Zm0 4q.425 0 .713-.288T9 16q0-.425-.288-.713T8 15q-.425 0-.713.288T7 16q0 .425.288.713T8 17Zm-3 4q-.825 0-1.413-.588T3 19V5q0-.825.588-1.413T5 3h11l5 5v11q0 .825-.588 1.413T19 21H5Zm0-2h14V9h-4V5H5v14ZM5 5v4v-4v14V5Z"/>'};var ct=Xs;const en={code:[{title:"用Python写一段冒泡排序算法",prompt:"用Python写一段冒泡排序算法"},{title:"用Swift写一段分治算法",prompt:"用Swift写一段分治算法"},{title:"将JSON数据转换成HTML格式的表格",prompt:'将下面的JSON数据转换成一张HTML格式的表格，仅使用HTML，表格需具备表头和列名：{ “resturant employees” :[ {“name”:“Shyam”, “email":“shyamjaiswal@gmail.com”}, {“name”:“Bob”, “email”:“bob32@gmail.com”}, {“name”:“Jai”, “email”:"jai87@gmail.com”} ]}'}]};function tn({openPopover:t,setOpenPopover:i,setMessage:s}){const[a,c]=p.useState("code"),n=()=>{i(null)},r=[{label:"coding",value:"code",icon:e.jsx(A,{icon:lt,width:20,height:20})},{label:"Text summary",value:"textSummary",icon:e.jsx(A,{icon:ct,width:20,height:20})}],d=r.filter(l=>l.value===a)[0].label;return e.jsxs(he,{open:t,onClose:n,arrow:"bottom-center",sx:{width:360},hiddenArrow:!0,children:[e.jsx(Z,{variant:"subtitle1",sx:{py:1,pb:1.5,px:1},children:"Prompt library"}),e.jsx(ve,{sx:{borderStyle:"dashed"}}),e.jsx(b,{children:e.jsx(rt,{value:a,scrollButtons:"auto",variant:"scrollable",allowScrollButtonsMobile:!0,onChange:(l,o)=>{c(o)},sx:{my:1,mx:1,justifyContent:"center",borderBottom:1,borderColor:"divider"},children:r.map(l=>e.jsx(at,{disableRipple:!0,value:l.value,style:{marginRight:12,minWidth:30,maxWidth:48},icon:l.icon},l.value))})}),e.jsx(pe,{sx:{mt:1,height:{xs:300,sm:380}},children:e.jsx(nt,{disablePadding:!0,subheader:e.jsx(Ke,{disableSticky:!0,sx:{py:.5,px:1,typography:"overline"},children:d}),children:e.jsx(_e.div,{variants:it().inUp,children:en[a].map((l,o)=>e.jsx(is,{selected:!1,onSelectQuery:s,title:l.title,prompt:l.prompt},o))})})})]})}function sn({disabled:t,participants:i,onSend:s,chatMode:a,onSetChatMode:c}){const n=se(),[r,d]=p.useState(""),[l,o]=p.useState(!1),[h,f]=p.useState([]),[C,k]=p.useState(null),y=h.map(x=>({src:x.preview})),j=ke(y),g=x=>{k(x.currentTarget)},w=x=>{o(x)},T=x=>{(x.metaKey||x.ctrlKey)&&x.key==="Enter"?S():(x.metaKey||x.ctrlKey)&&x.key.toLowerCase()==="a"?c("rag"):(x.metaKey||x.ctrlKey)&&x.key.toLowerCase()==="u"?c("function-calling"):(x.metaKey||x.ctrlKey)&&x.key.toLowerCase()==="e"&&c("open-chat")},S=()=>{!r||i===null||(s({content:r,senderId:"user",mode:"new",attachments:h}),d(""),f([]))};return e.jsxs(_,{sx:{ml:.5,mr:-.5,minHeight:52,display:"flex",position:"absolute",alignItems:"center",bottom:-66,width:"calc(100% - 8px)",paddingLeft:n.spacing(1),backgroundColor:n.palette.background.paper,py:.5,borderRadius:.75,boxShadow:l?`0 0 1px 0 ${F(n.palette.mode==="light"?n.palette.grey[500]:n.palette.grey[200],.12)}, 0 1px 10px 2px ${F(n.palette.mode==="light"?n.palette.grey[800]:n.palette.grey[700],.1)}`:`0 0 1px 0 ${F(n.palette.mode==="light"?n.palette.grey[500]:n.palette.grey[200],.12)}, 0 1px 4px -1px ${F(n.palette.mode==="light"?n.palette.grey[800]:n.palette.grey[700],.14)}`},children:[e.jsxs(b,{sx:{mr:1},children:[e.jsx(G,{size:"small",onClick:g,children:e.jsx(A,{icon:Ye,width:22})}),e.jsx(tn,{openPopover:C,setMessage:d,setOpenPopover:k})]}),e.jsx(ot,{className:"llm-input",multiline:!0,maxRows:10,fullWidth:!0,value:r,disableUnderline:!0,onBlur:()=>w(!1),onFocus:()=>w(!0),onKeyDown:T,onChange:x=>d(x.target.value),placeholder:"Enter question",endAdornment:e.jsx(b,{direction:"row",sx:{mr:.5,"& > *":{mx:.25}},alignItems:"center",children:e.jsx(G,{disabled:t,size:"small",children:e.jsx(A,{icon:es,width:20,height:20})})}),sx:{pb:.5}}),e.jsx(ve,{orientation:"vertical",flexItem:!0}),e.jsx(G,{disabled:r.trim().length===0,onClick:S,sx:{mx:1,mr:.75},children:e.jsx(A,{color:We[a],icon:zs,width:24,height:24})}),e.jsx(Te,{index:j.selected,slides:y,open:j.open,close:j.onClose})]})}function nn({onSetFiles:t,title:i="Upload Files",open:s,onClose:a,onCreate:c,onUpdate:n,folderName:r,onChangeFolderName:d,...l}){const[o,h]=p.useState([]);p.useEffect(()=>{s||h([])},[s]);const f=p.useCallback(j=>{const g=j.map(w=>Object.assign(w,{preview:URL.createObjectURL(w)}));h([...o,...g])},[o]),C=()=>{a(),t(o)},k=j=>{const g=o.filter(w=>w!==j);t(g)},y=()=>{t([])};return e.jsxs(Os,{fullWidth:!0,maxWidth:"sm",open:s,onClose:a,...l,children:[e.jsxs(js,{sx:{p:j=>j.spacing(3,3,2,3)},children:[" ",i," "]}),e.jsxs(Ns,{dividers:!0,sx:{pt:1,pb:0,border:"none"},children:[(c||n)&&e.jsx(Dt,{fullWidth:!0,label:"Folder name",value:r,onChange:d,sx:{mb:3}}),e.jsx(Fs,{multiple:!0,files:o,onDrop:f,onRemove:k})]}),e.jsxs(Es,{children:[e.jsx(ee,{variant:"contained",startIcon:e.jsx(X,{icon:"eva:cloud-upload-fill"}),onClick:C,children:"Upload"}),!!o.length&&e.jsx(ee,{variant:"outlined",color:"inherit",onClick:y,children:"Remove all"}),(c||n)&&e.jsx(b,{direction:"row",justifyContent:"flex-end",flexGrow:1,children:e.jsx(ee,{variant:"soft",onClick:c||n,children:n?"Save":"Create"})})]})]})}function on({action:t,selected:i,rowCount:s,numSelected:a,onSelectAllItems:c,sx:n,...r}){return e.jsxs(_,{sx:{zIndex:9,right:-16,bottom:-16,display:"flex",borderRadius:"8px",position:"absolute",alignItems:"center",bgcolor:"text.primary",p:d=>d.spacing(.5,1,.5,.25),boxShadow:d=>d.customShadows.z20,m:{xs:2,md:3},...n},...r,children:[e.jsx($t,{indeterminate:!!a&&a<s,checked:!!s&&a===s,onChange:d=>c(d.target.checked),icon:e.jsx(X,{icon:"eva:radio-button-off-fill"}),checkedIcon:e.jsx(X,{icon:"eva:checkmark-circle-2-fill"}),indeterminateIcon:e.jsx(X,{icon:"eva:minus-circle-fill"})}),i&&e.jsxs(Z,{variant:"subtitle2",sx:{mr:2,color:d=>d.palette.mode==="light"?"common.white":"grey.800"},children:[i.length," ",i.length>1?"cards":"card"," selected"]}),t&&t]})}const rn={id:"user",name:"Admin"},an=["File","MySQL","PostgreSQL"],bt=[{id:"assistant",name:"GPT"}];function ln({apiUrl:t,messages:i,onUpdateMessages:s,configurations:a,selectedIndex:c,chatMode:n,onSetChatMode:r,isNavHorizontal:d}){const l=se(),o=kt(),h=ae(),f=ae(),[C,k]=p.useState([]),[y,j]=p.useState("File"),[g,w]=p.useState([]),[T,S]=p.useState(),[x,O]=p.useState([]),[I,B]=p.useState([]),U=a[`${n}-Past messages included`],$=p.useCallback((R,L,P)=>{s(H=>{const te=H.findIndex(ce=>ce.id===R);if(te===-1)return[...H];const J=[...H];return J[te]={...J[te],body:L,createdAt:new Date,status:P},J})},[s]),M=R=>{const{messageId:L,message:P,contentType:H,sources:te,function_calls:J,createdAt:ce,senderId:oe,mode:de,log_timestamp:Ie,attachments:Re}=R,ie={id:L,body:P,query:P,contentType:H,sources:te,function_calls:J,createdAt:ce,senderId:oe,mode:de,chatMode:n,log_timestamp:Ie,attachments:Re,status:"running"};s(q=>{const ge=q.findIndex(V=>V.id===L);if(!P)return[...q];if(ge===-1){if(de==="attach"){if(P.startsWith("(SYS)function")){const u={...q[q.length-1],body:P,function_calls:J};return P.startsWith("(SYS)function executed")&&De({mode:n,onSend:z,request:Ce([...q.slice(0,-1),u],n,U,a),indexName:c,shouldStream:a[`${n}-Should stream`],aoaiResourceName:a[`${n}-Deployment`],systemPrompt:a[`${n}-System message`]}),[...q.slice(0,-1),u]}const V=q[q.length-1].function_calls;return[...q.slice(0,-1),{...q[q.length-1],body:P,...V&&{function_calls:V}}]}if(de==="new"&&P!=="(SYS)Working on it..."&&oe==="assistant")return[...q.slice(0,-1),ie];if(de==="insight"&&oe==="user")return $(L,"","running"),De({mode:n,onSend:$,request:Ce([ie],n,"0",a),shouldStream:a[`${n}-Should stream`],aoaiResourceName:a[`${n}-Deployment`],indexName:c,systemPrompt:a[`${n}-System message`],messageId:L}),[...q,ie];if(de==="new"&&oe==="user"){const V=x.map(u=>C.find(E=>E.name===u));return $(L,"","running"),dt(t,L,P,V,$,a[`${n}-Deployment`]),[...q,ie]}return[...q,ie]}const re=[...q];return re[ge]=ie,re})},K=[bt[0]],N={id:"1",participants:[rn,bt[0]],type:"ONE_TO_ONE",unreadCount:0,messages:i},z=({content:R,senderId:L,mode:P,sources:H=[],function_calls:te=[],msgId:J=void 0,timestamp:ce=void 0,attachments:oe=[]})=>{M({conversationId:"1",messageId:J===void 0?et():J,message:R,contentType:"text",sources:H,function_calls:te,createdAt:new Date,senderId:L,mode:P,chatMode:n,log_timestamp:ce,attachments:oe})},v=p.useCallback(R=>{const L=i.find(H=>H.id===R),P=i.filter(H=>{var te;return(te=L==null?void 0:L.sources)==null?void 0:te.map(J=>J.url).includes(H.id)});S(L),B(P),f.onToggle()},[i,f]),Y=p.useCallback(R=>{const L=g.includes(R)?g.filter(P=>P!==R):[...g,R];w(L)},[g]),Q=p.useCallback(()=>{const R=i.filter(P=>g.includes(P.id)).map(P=>{const H=JSON.parse(P.body);return{query:H.query,response:JSON.stringify(H.response)}});if(!R.length)return;const L=`Analyze the following list of query-response pairs to identify patterns, anomalies, and insights. Provide a comprehensive summary of the findings, including any significant correlations, unexpected results, and potential areas for further investigation. Each query-response pair is related to sales data."

Query-Response Pairs:
${R.map((P,H)=>`${H+1}. Query: "${P.query}"
   Response: "${P.response}"`).join(`
`)}
    
Instructions:
- Identify key trends and insights from the provided query-response pairs.
- Highlight any significant changes or anomalies in the data.
- Suggest possible reasons for the patterns observed.
- Recommend areas for potential improvement or further analysis based on the insights gathered.

Please use the same language as the query.`;z({content:L,senderId:"user",mode:"insight",sources:i.filter(P=>g.includes(P.id)).map(P=>({label:P.query,url:P.id}))}),w([])},[g,i]),D=p.useCallback((R,L)=>{if(R){w(L);return}w([])},[]),W=p.useCallback(R=>{k(L=>[...L,...R])},[]),ne=p.useCallback(R=>{O(R)},[]),le=p.useCallback((R,L)=>{$(R,"","running");const P=x.map(H=>C.find(J=>J.name===H));dt(t,R,L,P,$,a[`${n}-Deployment`])},[t,n,a,x,$,C]),me=p.useCallback(R=>{o.onClose(),j(R),R==="File"&&h.onTrue()},[h,o]),ue=d?"calc(100vh - 366px)":"calc(100vh - 206px)";return e.jsxs(_,{sx:{position:"relative"},children:[e.jsxs(b,{sx:{width:1,overflow:"hidden"},children:[e.jsxs(je,{container:!0,spacing:2.5,sx:{p:.5,pt:0},children:[e.jsx(je,{xs:12,md:5,sx:{width:"100%",height:ue},children:e.jsxs(ze,{sx:{height:1,borderRadius:.75},children:[e.jsx(ht,{title:"Data",sx:{mt:-1,ml:-.5,mr:.5,pb:2,borderBottom:`dashed 1px ${F(l.palette.grey[500],.2)}`},action:e.jsx(b,{direction:"row",alignItems:"center",spacing:1.25,children:e.jsxs(Zt,{onClick:o.onOpen,sx:{pl:1,py:.5,pr:.5,mt:.25,borderRadius:.75,typography:"subtitle2",color:l.palette.background.default,bgcolor:l.palette.text.primary,whiteSpace:"nowrap"},children:[y,e.jsx(X,{width:16,icon:o.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill",sx:{ml:.5}})]})})}),e.jsx(pe,{sx:{flexDirection:"row",height:"calc(100vh - 290px)",overflowX:"hidden"},children:e.jsx(Gs,{dataFiles:C,onSetselectedFiles:ne})})]})}),e.jsx(je,{xs:12,md:7,sx:{width:"100%",height:ue},children:e.jsxs(ze,{sx:{height:1,borderRadius:.75},children:[e.jsx(ht,{title:"AI Analyzer",sx:{mt:-1,pb:2,ml:-.5,mr:.5,borderBottom:`dashed 1px ${F(l.palette.grey[500],.2)}`},action:e.jsx(ee,{size:"small",variant:"contained",onClick:()=>{},startIcon:e.jsx(A,{icon:ws}),sx:{height:30,mt:.25},children:"Download"})}),e.jsx(Qs,{conversation:N,onSendQuery:le,selectedCards:g,onSelectCard:Y,onOpenReport:v})]})})]}),e.jsx(sn,{participants:K,onSend:z,disabled:!0,chatMode:n,onSetChatMode:r})]}),!!(g!=null&&g.length)&&e.jsx(on,{numSelected:g.length,rowCount:i.length,selected:g,onSelectAllItems:R=>D(R,i.map(L=>L.id)),action:e.jsx(e.Fragment,{children:e.jsx(ee,{color:"primary",size:"small",variant:"contained",startIcon:e.jsx(X,{icon:"ic:twotone-insights",width:16,sx:{mr:-.25}}),onClick:Q,sx:{borderRadius:.5},children:"Insights"})})}),f.value&&e.jsx(_s,{onCloseCompose:f.onFalse,insightMessage:T,sourceMessages:I}),e.jsx(he,{open:o.open,onClose:o.onClose,sx:{width:140},children:an.map(R=>e.jsx($e,{disabled:R!=="File",selected:R===y,onClick:()=>me(R),children:R},R))}),e.jsx(nn,{onSetFiles:W,open:h.value,onClose:h.onFalse})]})}function cn({mlApp:t}){const i=Fe(),[s,a]=p.useState("open-chat"),[c,n]=p.useState([]),r=ye(qe),d=r?r.map(x=>x.resourceName):[],l=r?r.filter(x=>x.primary):[],o=l&&l.length>0?l[0].resourceName:"";let h="";o.length>0?h=o:d&&d.length>0&&(h=d[0]);const f=t.content,C=ye(t.id),k=Je(h),[y,j]=p.useState({...k,...C}),g=x=>{j(x),be(t.id,x)},w=()=>{n([])},T=ae(),S=i.themeLayout==="horizontal";return e.jsxs(e.Fragment,{children:[e.jsxs(b,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:2},children:[e.jsx(ee,{to:Me.gbbai.appGallery.root,component:He,size:"small",color:"inherit",startIcon:e.jsx(A,{icon:Ge,style:{marginRight:"-5px"}}),sx:{display:"flex"},children:"Back"}),e.jsxs(b,{direction:"row",alignItems:"center",children:[e.jsx(Qe,{color:"default",sx:{textTransform:"None",mr:1.5},children:y[`${s}-Deployment`]||"No GPT deployment"}),e.jsx(Ue,{title:"Clear histroy",children:e.jsx(G,{size:"small",color:"default",onClick:w,sx:{width:36,height:36},children:e.jsx(Se,{src:"/assets/icons/modules/ic-sweep.svg",sx:{width:22,height:22}})})}),e.jsx(G,{size:"small",color:"default",onClick:T.onTrue,sx:{width:36,height:36},children:e.jsx(Se,{src:"/static/icons/apps/ic_settings.svg",sx:{width:20,height:20}})})]})]}),e.jsx(_,{children:e.jsx(ln,{apiUrl:f,messages:c,onUpdateMessages:n,configurations:y,chatMode:s,onSetChatMode:a,isNavHorizontal:S})}),e.jsx(Ve,{open:T.value,callerId:t.id,onClose:T.onFalse,configurations:y,onUpdate:g,tabs:[]})]})}function dn({title:t,content:i,icon:s,chatMode:a,onSend:c}){const n=r=>{r&&(c({content:r,senderId:"user",mode:"new"}),c({content:"(SYS)Working on it...",senderId:"assistant",mode:"new"}))};return e.jsx(ze,{sx:{px:1,py:.25,borderRadius:1.25,bgcolor:"background.white",boxShadow:r=>r.customShadows.z3,"&:hover":{boxShadow:r=>r.customShadows.z20},...a.includes(t.split(" ")[0].toLowerCase())&&{borderColor:"transparent",bgcolor:"background.paper",boxShadow:r=>r.customShadows.z16}},onClick:()=>n(i),children:e.jsxs(b,{direction:"row",spacing:1.5,sx:{px:.5,py:0},alignItems:"center",justifyContent:"space-between",children:[e.jsxs(b,{sx:{pb:1.5},children:[e.jsx(b,{direction:"row",spacing:1.25,sx:{p:1},alignItems:"center",children:e.jsx(Z,{variant:"h6",sx:{color:We[a]},children:t})}),e.jsx(Z,{variant:"body2",sx:{px:1,display:"-webkit-box",overflow:"hidden",textOverflow:"ellipsis",WebkitBoxOrient:"vertical",WebkitLineClamp:1},children:i})]}),!!s&&s]})})}const pn=["jpg","jpeg","gif","png","gif","bmp","svg","webp"],wt=new RegExp(`https.*\\.(${pn.join("|")}).*(?=\\))`,"i"),jt=/!\[.*?\]\((.*?)\)/g,hn=[{title:"Sample 1",content:"What is the length and width of FDP6031S Power Clip?"},{title:"Sample 2",content:"Who is the manufacturer of FDP6031S Power Clip?"},{title:"Sample 3",content:"What are Q2 features of FDP6031S Power Clip?"},{title:"Sample 4",content:"What are MOSFET max ratings?"},{title:"Sample 5",content:"What are on region characteristics of Q1-N-Channel?"},{title:"Sample 6",content:"What is the thickness of FDP6031S Power Clip?"}];function mn({conversation:t,chatMode:i,onSend:s,onSetChatMode:a,onOpenRagSourcePopover:c}){const{messagesEndRef:n}=Ze(t.messages),r=t.messages.filter(l=>{if(!l.body)return!1;const o=l.body.match(wt);return!!(o?o[0]:"")}).map(l=>{if(!l.body)return{src:""};const o=l.body.match(wt),h=o?o[0]:"",f=[];let C=jt.exec(l.body);for(;C!==null;)C[1]!==h&&f.push(C[1]),C=jt.exec(l.body);return[{src:h},...f.map(k=>({src:k}))]}).flat();t.messages.forEach(l=>{l.attachments!==void 0&&l.attachments.length>0&&l.attachments.forEach(o=>{r.push({src:o.preview})})});const d=ke(r);return e.jsxs(e.Fragment,{children:[e.jsxs(pe,{ref:n,sx:{py:2,px:1,height:1},children:[e.jsxs(_,{sx:{mx:2,mb:8,mt:0},children:[e.jsx(rs,{title:"Manufacturing Copilot"}),e.jsx(Z,{variant:"subtitle1",sx:{mb:2,mt:0,textAlign:"center",fontWeight:500},children:"Try following prompts"}),e.jsx(_,{sx:{display:"grid",gap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(3, 1fr)"},width:"100%"},children:hn.map(l=>e.jsx(dn,{title:l.title,content:l.content,icon:l.icon,chatMode:i,onSend:s},l.title))})]}),t.messages.map((l,o)=>e.jsx(as,{message:l,conversation:t,isLastMessage:o===t.messages.length-1,onOpenRagSourcePopover:c},l.id))]}),e.jsx(Te,{index:d.selected,slides:r,open:d.open,close:d.onClose})]})}const un={width:24,height:24,body:'<path fill="currentColor" d="m18.5 10l4.4 11h-2.155l-1.201-3h-4.09l-1.199 3h-2.154L16.5 10h2ZM10 2v2h6v2h-1.968a18.221 18.221 0 0 1-3.62 6.301a14.865 14.865 0 0 0 2.335 1.707l-.75 1.878A17.016 17.016 0 0 1 9 13.725a16.677 16.677 0 0 1-6.201 3.548l-.536-1.929a14.7 14.7 0 0 0 5.327-3.042A18.078 18.078 0 0 1 4.767 8h2.24A16.031 16.031 0 0 0 9 10.877a16.165 16.165 0 0 0 2.91-4.876L2 6V4h6V2h2Zm7.5 10.885L16.253 16h2.492L17.5 12.885Z"/>'};var Nt=un;const xn={width:24,height:24,body:'<path fill="currentColor" d="M22 5.18L10.59 16.6l-4.24-4.24l1.41-1.41l2.83 2.83l10-10L22 5.18zm-2.21 5.04c.13.57.21 1.17.21 1.78c0 4.42-3.58 8-8 8s-8-3.58-8-8s3.58-8 8-8c1.58 0 3.04.46 4.28 1.25l1.44-1.44A9.9 9.9 0 0 0 12 2C6.48 2 2 6.48 2 12s4.48 10 10 10s10-4.48 10-10c0-1.19-.22-2.33-.6-3.39l-1.61 1.61z"/>'};var Et=xn;const gn={width:48,height:48,body:'<g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4"><path d="M24 24v-5L39 4l5 5l-15 15h-5Z" clip-rule="evenodd"/><path d="M16 24H9a5 5 0 0 0 0 10h30a5 5 0 0 1 0 10H18"/></g>'};var Bt=gn;const fn={width:24,height:24,body:'<path fill="currentColor" d="M12 17.5c2.33 0 4.3-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5M8.5 11A1.5 1.5 0 0 0 10 9.5A1.5 1.5 0 0 0 8.5 8A1.5 1.5 0 0 0 7 9.5A1.5 1.5 0 0 0 8.5 11m7 0A1.5 1.5 0 0 0 17 9.5A1.5 1.5 0 0 0 15.5 8A1.5 1.5 0 0 0 14 9.5a1.5 1.5 0 0 0 1.5 1.5M12 20a8 8 0 0 1-8-8a8 8 0 0 1 8-8a8 8 0 0 1 8 8a8 8 0 0 1-8 8m0-18C6.47 2 2 6.5 2 12a10 10 0 0 0 10 10a10 10 0 0 0 10-10A10 10 0 0 0 12 2Z"/>'};var Kt=fn;const bn={width:24,height:24,body:'<path fill="currentColor" d="M18.5 20a.5.5 0 0 1-.5.5H6a.5.5 0 0 1-.5-.5v-3H4v3a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9.828a2 2 0 0 0-.586-1.414l-5.829-5.828a.491.491 0 0 0-.049-.04a.63.63 0 0 1-.036-.03a2.072 2.072 0 0 0-.219-.18a.652.652 0 0 0-.08-.044l-.048-.024l-.05-.029c-.054-.031-.109-.063-.166-.087a1.977 1.977 0 0 0-.624-.138a.56.56 0 0 1-.059-.007a.605.605 0 0 0-.082-.007H6a2 2 0 0 0-2 2v9h1.5V4a.5.5 0 0 1 .5-.5h6V8a2 2 0 0 0 2 2h4.5v10Zm-5-15.379L17.378 8.5H14a.5.5 0 0 1-.5-.5V4.621ZM8.75 11.5a.75.75 0 0 0 0 1.5h6.5a.75.75 0 0 0 0-1.5h-6.5Zm-6 2.75a.75.75 0 0 0 0 1.5h6.5a.75.75 0 0 0 0-1.5h-6.5Zm6 2.75a.75.75 0 0 0 0 1.5h6.5a.75.75 0 0 0 0-1.5h-6.5Z"/>'};var _t=bn;const wn={code:[{title:"用Python写一段冒泡排序算法",prompt:"用Python写一段冒泡排序算法"},{title:"用Swift写一段分治算法",prompt:"用Swift写一段分治算法"},{title:"将JSON数据转换成HTML格式的表格",prompt:'将下面的JSON数据转换成一张HTML格式的表格，仅使用HTML，表格需具备表头和列名：{ “resturant employees” :[ {“name”:“Shyam”, “email":“shyamjaiswal@gmail.com”}, {“name”:“Bob”, “email”:“bob32@gmail.com”}, {“name”:“Jai”, “email”:"jai87@gmail.com”} ]}'}],translate:[{title:"La performance du système est plus lente que d'habitude.",prompt:`La performance du système est plus lente que d'habitude. 
      上面这句话是什么语言`},{title:"Mi monitor tiene píxeles que no se iluminan.",prompt:`Mi monitor tiene píxeles que no se iluminan.
      上面这句话是什么语言`},{title:"Mój klawisz Ctrl jest zepsuty.",prompt:`Mój klawisz Ctrl jest zepsuty
      上面这句话是什么语言`}],entityExtraction:[{title:"小明最近购买了一辆自行车",prompt:"请提取段落中的人和出现的物品：小明最近购买了一辆自行车。"},{title:"全省各类经营主体、广大干部职工、各界群众：",prompt:`全省各类经营主体、广大干部职工、各界群众：

时至立夏、水绿荫浓。值此我省第十七个“政务公开日”到来之际，我谨代表辽宁省人民政府向你们发出一封公开信，诚挚欢迎大家通过政务公开监督政府施政，推动政府创新治理理念、加快职能转变，不断提高政务运行效能和政务公开水平，持续优化政策服务，打造一流营商环境，聚力推动全面振兴取得新突破。

推行政务公开，是政府服务人民、依靠人民，对人民负责、接受人民监督的重要制度安排，是保障人民主体地位的具体举措，也是加快建设法治政府的有效途径。习近平总书记强调，要用制度安排把政务公开贯穿政务运行全过程，权力运行到哪里，公开和监督就延伸到哪里，以公开促落实、促规范、促服务。党的十八大以来，党中央、国务院高度重视政务公开工作，坚持以公开为常态、不公开为例外，遵循公正、公平、合法、便民的原则，推动新时代政务公开不断向纵深发展。辽宁省委、省政府认真落实党中央、国务院决策部署，积极主动作为，勇于探索创新，政务公开广度深度稳步拓展、制度体系日趋健全、信息化程度显著提升、功能作用不断增强，推动政务公开工作迈上新台阶。

政务公开与政府施政相伴相生。当前，全省上下正在深入贯彻落实习近平总书记关于东北、辽宁振兴发展的重要讲话和指示批示精神，抢抓“十四五”后三年重要窗口期、机遇期，全力实施全面振兴新突破三年行动，大干三年、奋斗三年，以超常规举措打一场新时代东北振兴、辽宁振兴的“辽沈战役”，在新时代东北振兴上展现更大担当和作为。实现全面振兴新突破，离不开各级政府的忠诚履职、依法行政，也离不开全省人民的积极参与、献计出力，这对政务公开工作提出了新的更高要求。

面对政务公开工作的新形势、新挑战、新任务，全省各级政府将以“5·15”政务公开日为契机，坚持以人民为中心的发展思想，充分发挥积极性、主动性、创造性，转变工作方式，加大工作力度，全面提升政务公开质量和实效，让公开成为自觉，让透明成为常态，加快推进政府治理体系和治理能力现代化，努力建设人民满意的服务型政府。

我们将深入开展政策文件公开，推进依法行政、优化法治环境。发布政策、解读政策、宣传政策，是政务公开的初心使命、根本职责，也是政府治理的重要一环。我们将加快清理规范各类政策文件，及时发现和纠正政策偏差，建设统一的政策文件库，构建以网上发布为主的政策发布新格局，全面优化政策解读，让群众第一时间知晓理解政策、配合执行政策，推动执行机关第一时间贯彻落实，切实做到按法律法规办事、按政策规章办事、在群众监督下办事。

我们将不断拓展政务公开职能，降低综合成本、减轻企业负担。一个企业、一个项目能否落地，很大程度上是看综合成本有没有比较优势。我们将不断优化政策供给，积极应用数字技术对企业信息和政策要素进行精准匹配，推进惠企政策免申即享、直达快享，进一步提高办事效率、降低制度成本。大力推进水、电、气、暖以及交通、环保等领域公共企事业单位信息公开，依法公开、动态调整行政事业性收费和政府性基金目录，实行清单管理，着力减轻企业经营负担。

我们将积极引导公众参与决策，倾听百姓呼声、汲取群众智慧。企业和群众对政策制定的内容最关注，对政策实施的效果最有发言权。我们将着眼于满足企业和群众的知情权、表达权和参与权，不断完善决策意见征集、采纳、反馈机制，履行好公众参与重大行政决策的法定程序，做到重大情况让人民知道、重大问题经人民讨论。深入开展调查研究，依托政府网站、政务新媒体等渠道，采取民意调查、座谈走访等形式，提高行政决策公众参与度和科学化、民主化、法治化水平。

上下同欲者胜，同舟共济者赢。我们坚信，有党中央的坚强领导，有全省人民的勠力同心，我们有底气、有决心、有能力做好新时代政务公开工作，打好优化营商环境这场攻坚战，为打赢新时代“辽沈战役”奠定坚实基础。我们将牢固树立“人人都是营商环境”的理念，全面发挥政务公开促落实、助监督、强监管作用，主动接受经营主体和广大群众监督，大力发扬“拼抢争实”作风，团结带领全省人民携手并肩拼三年、甩开膀子干三年，为奋力实现辽宁全面振兴新突破，扎实推进中国式现代化辽宁实践作出新的更大贡献。

最后，祝愿全省人民安居乐业、幸福如意，各类经营主体繁荣兴旺、事业长虹！


从上文中，提取信息，包括:“人物姓名”、“政府机关”、“日期”，和“口号”等类型的实体，输出JSON格式内容，并最终采用Markdown格式呈现`}],textSummary:[{title:"客服代表: 你好，欢迎来到小山医疗",prompt:`请总结以下段落：
客服代表: 你好，欢迎来到小山医疗
客户: 你好，我想咨询一些问题
客服代表: 没问题，但首先让我确认您的身份
客户：好的
客服代表：请问您的出生年月是？
客户：1989年5月20号
客服代表：好，验证通过。请问您有什么具体的问题？
客户：我想咨询一下上次我光子嫩肤的退款什么时候能够到账？
客服代表：请让我为您查询
客户：好的
客服代表：根据系统上为您查询到的记录，您的这次退款请求已经被处理，金额将在七个工作日后到账，具体到账时间将会通过短信通知，请您留意
客户：非常感谢
客服代表：还有其他问题吗？
客户：没有了，谢谢
客服代表：太好了，感谢致电小山医疗，祝您生活愉快`},{title:"全省各类经营主体、广大干部职工、各界群众：",prompt:`全省各类经营主体、广大干部职工、各界群众：

时至立夏、水绿荫浓。值此我省第十七个“政务公开日”到来之际，我谨代表辽宁省人民政府向你们发出一封公开信，诚挚欢迎大家通过政务公开监督政府施政，推动政府创新治理理念、加快职能转变，不断提高政务运行效能和政务公开水平，持续优化政策服务，打造一流营商环境，聚力推动全面振兴取得新突破。

推行政务公开，是政府服务人民、依靠人民，对人民负责、接受人民监督的重要制度安排，是保障人民主体地位的具体举措，也是加快建设法治政府的有效途径。习近平总书记强调，要用制度安排把政务公开贯穿政务运行全过程，权力运行到哪里，公开和监督就延伸到哪里，以公开促落实、促规范、促服务。党的十八大以来，党中央、国务院高度重视政务公开工作，坚持以公开为常态、不公开为例外，遵循公正、公平、合法、便民的原则，推动新时代政务公开不断向纵深发展。辽宁省委、省政府认真落实党中央、国务院决策部署，积极主动作为，勇于探索创新，政务公开广度深度稳步拓展、制度体系日趋健全、信息化程度显著提升、功能作用不断增强，推动政务公开工作迈上新台阶。

政务公开与政府施政相伴相生。当前，全省上下正在深入贯彻落实习近平总书记关于东北、辽宁振兴发展的重要讲话和指示批示精神，抢抓“十四五”后三年重要窗口期、机遇期，全力实施全面振兴新突破三年行动，大干三年、奋斗三年，以超常规举措打一场新时代东北振兴、辽宁振兴的“辽沈战役”，在新时代东北振兴上展现更大担当和作为。实现全面振兴新突破，离不开各级政府的忠诚履职、依法行政，也离不开全省人民的积极参与、献计出力，这对政务公开工作提出了新的更高要求。

面对政务公开工作的新形势、新挑战、新任务，全省各级政府将以“5·15”政务公开日为契机，坚持以人民为中心的发展思想，充分发挥积极性、主动性、创造性，转变工作方式，加大工作力度，全面提升政务公开质量和实效，让公开成为自觉，让透明成为常态，加快推进政府治理体系和治理能力现代化，努力建设人民满意的服务型政府。

我们将深入开展政策文件公开，推进依法行政、优化法治环境。发布政策、解读政策、宣传政策，是政务公开的初心使命、根本职责，也是政府治理的重要一环。我们将加快清理规范各类政策文件，及时发现和纠正政策偏差，建设统一的政策文件库，构建以网上发布为主的政策发布新格局，全面优化政策解读，让群众第一时间知晓理解政策、配合执行政策，推动执行机关第一时间贯彻落实，切实做到按法律法规办事、按政策规章办事、在群众监督下办事。

我们将不断拓展政务公开职能，降低综合成本、减轻企业负担。一个企业、一个项目能否落地，很大程度上是看综合成本有没有比较优势。我们将不断优化政策供给，积极应用数字技术对企业信息和政策要素进行精准匹配，推进惠企政策免申即享、直达快享，进一步提高办事效率、降低制度成本。大力推进水、电、气、暖以及交通、环保等领域公共企事业单位信息公开，依法公开、动态调整行政事业性收费和政府性基金目录，实行清单管理，着力减轻企业经营负担。

我们将积极引导公众参与决策，倾听百姓呼声、汲取群众智慧。企业和群众对政策制定的内容最关注，对政策实施的效果最有发言权。我们将着眼于满足企业和群众的知情权、表达权和参与权，不断完善决策意见征集、采纳、反馈机制，履行好公众参与重大行政决策的法定程序，做到重大情况让人民知道、重大问题经人民讨论。深入开展调查研究，依托政府网站、政务新媒体等渠道，采取民意调查、座谈走访等形式，提高行政决策公众参与度和科学化、民主化、法治化水平。

上下同欲者胜，同舟共济者赢。我们坚信，有党中央的坚强领导，有全省人民的勠力同心，我们有底气、有决心、有能力做好新时代政务公开工作，打好优化营商环境这场攻坚战，为打赢新时代“辽沈战役”奠定坚实基础。我们将牢固树立“人人都是营商环境”的理念，全面发挥政务公开促落实、助监督、强监管作用，主动接受经营主体和广大群众监督，大力发扬“拼抢争实”作风，团结带领全省人民携手并肩拼三年、甩开膀子干三年，为奋力实现辽宁全面振兴新突破，扎实推进中国式现代化辽宁实践作出新的更大贡献。

最后，祝愿全省人民安居乐业、幸福如意，各类经营主体繁荣兴旺、事业长虹！


阅读上文，并生成100字左右的摘要`},{title:"Azure AI Studio 专为开发人员设计，用于：在企业级平台上构建生成式 AI 应用程序",prompt:`从下面这段话中生成不超过50字的摘要, 
      “Azure AI Studio 专为开发人员设计，用于：
      在企业级平台上构建生成式 AI 应用程序。
      直接从工作室，可以首先通过 Azure AI SDK 和 Azure AI CLI 与项目代码交互。
      Azure AI Studio 是一个受信任的包容性平台，它使所有能力和首选项的开发人员都能通过 AI 进行创新并塑造未来。
      使用先进的 AI 工具和 ML 模型无缝探索、生成、测试和部署，这些模型基于负责任 AI 实践。
      作为一个团队进行构建。 Azure AI 资源提供企业级安全性以及一个协作环境，其中包含共享文件和与预先训练的模型、数据和计算的连接。
      组织你的方式。 项目有助于保存状态，使你可以从第一个想法到第一个原型，再到第一个生产部署进行迭代。 还可以轻松邀请其他人参与此旅程。
      使用 Azure AI Studio，可以评估大型语言模型 (LLM) 响应，并使用提示流协调提示应用程序组件以获得更好的性能。 该平台简化了可伸缩性，可以轻松地将概念证明转换为全面的生产。 持续监视和优化支持长期成功。”`}],sentiment:[{title:"刚买完两天就降价，你逗我呢。散热比较差，建议空调开低点，电风扇对着吹比较好",prompt:`刚买完两天就降价，你逗我呢。散热比较差，建议空调开低点，电风扇对着吹比较好。
对上文进行情感分析，并将其分类为积极、消极或中立`},{title:"全省各类经营主体、广大干部职工、各界群众：",prompt:`全省各类经营主体、广大干部职工、各界群众：

时至立夏、水绿荫浓。值此我省第十七个“政务公开日”到来之际，我谨代表辽宁省人民政府向你们发出一封公开信，诚挚欢迎大家通过政务公开监督政府施政，推动政府创新治理理念、加快职能转变，不断提高政务运行效能和政务公开水平，持续优化政策服务，打造一流营商环境，聚力推动全面振兴取得新突破。

推行政务公开，是政府服务人民、依靠人民，对人民负责、接受人民监督的重要制度安排，是保障人民主体地位的具体举措，也是加快建设法治政府的有效途径。习近平总书记强调，要用制度安排把政务公开贯穿政务运行全过程，权力运行到哪里，公开和监督就延伸到哪里，以公开促落实、促规范、促服务。党的十八大以来，党中央、国务院高度重视政务公开工作，坚持以公开为常态、不公开为例外，遵循公正、公平、合法、便民的原则，推动新时代政务公开不断向纵深发展。辽宁省委、省政府认真落实党中央、国务院决策部署，积极主动作为，勇于探索创新，政务公开广度深度稳步拓展、制度体系日趋健全、信息化程度显著提升、功能作用不断增强，推动政务公开工作迈上新台阶。

政务公开与政府施政相伴相生。当前，全省上下正在深入贯彻落实习近平总书记关于东北、辽宁振兴发展的重要讲话和指示批示精神，抢抓“十四五”后三年重要窗口期、机遇期，全力实施全面振兴新突破三年行动，大干三年、奋斗三年，以超常规举措打一场新时代东北振兴、辽宁振兴的“辽沈战役”，在新时代东北振兴上展现更大担当和作为。实现全面振兴新突破，离不开各级政府的忠诚履职、依法行政，也离不开全省人民的积极参与、献计出力，这对政务公开工作提出了新的更高要求。

面对政务公开工作的新形势、新挑战、新任务，全省各级政府将以“5·15”政务公开日为契机，坚持以人民为中心的发展思想，充分发挥积极性、主动性、创造性，转变工作方式，加大工作力度，全面提升政务公开质量和实效，让公开成为自觉，让透明成为常态，加快推进政府治理体系和治理能力现代化，努力建设人民满意的服务型政府。

我们将深入开展政策文件公开，推进依法行政、优化法治环境。发布政策、解读政策、宣传政策，是政务公开的初心使命、根本职责，也是政府治理的重要一环。我们将加快清理规范各类政策文件，及时发现和纠正政策偏差，建设统一的政策文件库，构建以网上发布为主的政策发布新格局，全面优化政策解读，让群众第一时间知晓理解政策、配合执行政策，推动执行机关第一时间贯彻落实，切实做到按法律法规办事、按政策规章办事、在群众监督下办事。

我们将不断拓展政务公开职能，降低综合成本、减轻企业负担。一个企业、一个项目能否落地，很大程度上是看综合成本有没有比较优势。我们将不断优化政策供给，积极应用数字技术对企业信息和政策要素进行精准匹配，推进惠企政策免申即享、直达快享，进一步提高办事效率、降低制度成本。大力推进水、电、气、暖以及交通、环保等领域公共企事业单位信息公开，依法公开、动态调整行政事业性收费和政府性基金目录，实行清单管理，着力减轻企业经营负担。

我们将积极引导公众参与决策，倾听百姓呼声、汲取群众智慧。企业和群众对政策制定的内容最关注，对政策实施的效果最有发言权。我们将着眼于满足企业和群众的知情权、表达权和参与权，不断完善决策意见征集、采纳、反馈机制，履行好公众参与重大行政决策的法定程序，做到重大情况让人民知道、重大问题经人民讨论。深入开展调查研究，依托政府网站、政务新媒体等渠道，采取民意调查、座谈走访等形式，提高行政决策公众参与度和科学化、民主化、法治化水平。

上下同欲者胜，同舟共济者赢。我们坚信，有党中央的坚强领导，有全省人民的勠力同心，我们有底气、有决心、有能力做好新时代政务公开工作，打好优化营商环境这场攻坚战，为打赢新时代“辽沈战役”奠定坚实基础。我们将牢固树立“人人都是营商环境”的理念，全面发挥政务公开促落实、助监督、强监管作用，主动接受经营主体和广大群众监督，大力发扬“拼抢争实”作风，团结带领全省人民携手并肩拼三年、甩开膀子干三年，为奋力实现辽宁全面振兴新突破，扎实推进中国式现代化辽宁实践作出新的更大贡献。

最后，祝愿全省人民安居乐业、幸福如意，各类经营主体繁荣兴旺、事业长虹！


对上文进行情感分析，并将其分类为积极、消极或中立`},{title:"我今天吃了米饭。",prompt:`我今天吃了米饭。 
对上面这句话进行情感分析，并判断其属于下列类别中的哪一类：1. 积极、2. 消极、3.中立。`}],task:[{title:"提供北京到上海的交通路线",prompt:"“提供北京到上海的交通路线”，判断这句话的意图属于下列选项中的哪一项，只回答选项编号：1.交通查询；2.采购；3.查询数据；4.翻译；5.生成摘要"},{title:"提取这句话中的出发地，目的地和途径点",prompt:"“北京到上海的交通路线，中途经过天津和廊坊”，提取这句话中的出发地，目的地和途径点，使用下面的JSON格式回复结果：{“出发地”：“xx”, “途经点”：[“xx”, “xx”, …], “目的地”，“xx”}"}],textGeneration:[{title:"请用礼貌得体的语言修改以下的请假模版",prompt:"请用礼貌得体的语言修改以下的请假模版： 今天我生病了，没法工作。我下午三点到四点要请假去医院看病，所以下午的周会我就先不参加了。"},{title:"阅读下面这则用户的商品评价，并生成合理的回复",prompt:"阅读下面这则用户的商品评价，并生成合理的回复： 刚买完两天就降价，你逗我呢。散热比较差，建议空调开低点，电风扇对着吹比较好"}],functionCalling:[{title:"Display the current video stream of the street camera",prompt:"Display the current video stream of the street camera"},{title:"Stock: show the stock price history of Microsoft in Novemer, 2023",prompt:`Show the stock price history of Microsoft from Nov.20 to Dec.10, 2023.

Remember: 
1. Organize the data in a table.
2. Use YYYY-MM-DD format for date information.
3. If there are decimals, please keep two places after the decimal point.`},{title:"Stock: show the Apple's stock price in Novemer, 2023",prompt:`Show the stock price history of Apple in November, 2023.

Remember: 
1. Organize the data in a table.
2. Use YYYY-MM-DD format for date information.
3. If there are decimals, please keep two places after the decimal point.`},{title:"Draw an image about flowers",prompt:"The 3D illustration of leaves and flowers in bright colors. It has a soft and whimsical feel"},{title:"Draw an image about Hokusai painting",prompt:"This scene is a Hokusai painting with The Great Wave off Kanagawa style, croissant on a plate, pexels contest winner, aspect ratio 16:9, cgsocietywlop, 8 h, golden cracks, the artist has used bright, picture of a loft in morning, object features, stylized border, pastry, french emperor."},{title:"Bing search: where will the 2032 olympics be held?",prompt:"Where will the 2032 olympics be held?"},{title:"Bing search: where will the 2040 olympics be held?",prompt:"Where will the 2040 olympics be held?"},{title:"Time query: 深圳现在几点钟？",prompt:"深圳现在几点钟？"},{title:"Bing search: 2032年奥运会在哪个城市举办？",prompt:"2032年奥运会在哪个城市举办？"},{title:"Bing search: 中国八达岭长城有多长？起点和终点在哪里？",prompt:"中国八达岭长城有多长？起点和终点在哪里？"},{title:"Sales: 按月份比较2022年和2023的产品销量。",prompt:"按月份比较2022年和2023的产品销量，在一张表里呈现。"},{title:"Stock: 显示Microsoft从2023年11月20日到12月10日的股票价格历史。",prompt:`显示Microsoft从2023年11月20日到12月10日的股票价格历史。
      记住：
      1. 将数据组织成一张表。
      2. 日期信息使用YYYY-MM-DD格式。
      3. 如果有小数，请保留小数点后两位。`},{title:"Draw: 一只鲸鲨在夜晚的静水中游过皮划艇底部，从上方观看，详细",prompt:"一只鲸鲨在夜晚的静水中游过皮划艇底部，从上方观看，详细。"},{title:"Draw: 明亮的颜色中的叶子和花朵的3D插图。它有一种柔和和异想天开的感觉",prompt:"明亮的颜色中的叶子和花朵的3D插图。它有一种柔和和异想天开的感觉。"},{title:"Video: 显示街头摄像头的当前的监控视频",prompt:"显示街头摄像头的当前的监控视频"},{title:"Video: 显示十字路口的监控视频",prompt:"显示十字路口的监控视频"}]};function jn({openPopover:t,setOpenPopover:i,setMessage:s}){const[a,c]=p.useState("code"),n=()=>{i(null)},r=[{label:"coding",value:"code",icon:e.jsx(A,{icon:lt,width:20,height:20})},{label:"translate",value:"translate",icon:e.jsx(A,{icon:Nt,width:20,height:20})},{label:"entity extraction",value:"entityExtraction",icon:e.jsx(A,{icon:_t,width:20,height:20})},{label:"Text summary",value:"textSummary",icon:e.jsx(A,{icon:ct,width:20,height:20})},{label:"sentiment analysis",value:"sentiment",icon:e.jsx(A,{icon:Kt,width:20,height:20})},{label:"task execution",value:"task",icon:e.jsx(A,{icon:Et,width:20,height:20})},{label:"text generation",value:"textGeneration",icon:e.jsx(A,{icon:Bt,width:20,height:20})},{label:"function calling",value:"functionCalling",icon:e.jsx(A,{icon:Xe,width:20,height:20})}],d=r.filter(l=>l.value===a)[0].label;return e.jsxs(he,{open:t,onClose:n,arrow:"bottom-center",sx:{width:360},hiddenArrow:!0,children:[e.jsx(Z,{variant:"subtitle1",sx:{py:1,pb:1.5,px:1},children:"Prompt library"}),e.jsx(ve,{sx:{borderStyle:"dashed"}}),e.jsx(b,{children:e.jsx(rt,{value:a,scrollButtons:"auto",variant:"scrollable",allowScrollButtonsMobile:!0,onChange:(l,o)=>{c(o)},sx:{my:1,mx:1,justifyContent:"center",borderBottom:1,borderColor:"divider"},children:r.map(l=>e.jsx(at,{disableRipple:!0,value:l.value,style:{marginRight:12,minWidth:30,maxWidth:48},icon:l.icon},l.value))})}),e.jsx(pe,{sx:{mt:1,height:{xs:300,sm:380}},children:e.jsx(nt,{disablePadding:!0,subheader:e.jsx(Ke,{disableSticky:!0,sx:{py:.5,px:1,typography:"overline"},children:d}),children:e.jsx(_e.div,{variants:it().inUp,children:wn[a].map((l,o)=>e.jsx(ls,{selected:!1,onSelectQuery:s,title:l.title,prompt:l.prompt},o))})})})]})}function yn({kb:t,onOpenKbPopover:i}){const s=se();return e.jsxs(b,{direction:"row",spacing:1,alignItems:"center",sx:{position:"relative",py:.5,px:1.25,maxWidth:200,border:`${F(s.palette.divider,.18)} 1px solid`,borderRadius:.75},children:[e.jsx(st,{file:"folder",sx:{width:18,height:18}}),e.jsx(_,{sx:{width:"100%",fontSize:"12px",overflow:"auto",textTransform:"none",whiteSpace:"noWrap",justifyContent:"flex-start",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},children:e.jsx(Z,{sx:{fontSize:"13px"},children:t||"No knowledge base"})})]})}function Sn({selectedTools:t,onOpenToolPopover:i}){const s=se(),{tools:a,toolsLoading:c,toolsRefetching:n}=Oe(),r=a.filter(d=>t==null?void 0:t.includes(d.id));return e.jsxs(e.Fragment,{children:[(!t||t.length===0)&&e.jsxs(b,{direction:"row",spacing:1,alignItems:"center",onClick:i,sx:{p:.5,borderRadius:2,cursor:"pointer",background:`${F(s.palette.divider,.22)}`},children:[e.jsx(we,{alt:"placeholder",src:"/assets/icons/navbar/ic_tool.svg",sx:{width:20,height:20}}),e.jsx(Z,{sx:{fontSize:"13px",mr:.75},children:"No Tool"})]}),(c||n)&&t&&[...Array(t.length)].map((d,l)=>e.jsxs(b,{direction:"row",spacing:1,alignItems:"center",sx:{p:.5,borderRadius:2,background:`${F(s.palette.divider,.22)}`},children:[e.jsx(we,{alt:"placeholder",src:"/assets/icons/navbar/ic_tool.svg",sx:{width:20,height:20}}),e.jsx(Le,{variant:"rectangular",width:60,height:10,sx:{borderRadius:1,mr:.75}})]},l)),!c&&r&&r.length>0&&r.map((d,l)=>e.jsxs(b,{direction:"row",spacing:1,alignItems:"center",onClick:i,sx:{p:.5,maxWidth:200,borderRadius:2,cursor:"pointer",background:`${F(s.palette.divider,.14)}`},children:[e.jsx(we,{alt:d.name,src:d.cover,sx:{width:20,height:20}}),e.jsx(_,{sx:{width:"100%",fontSize:"12px",overflow:"auto",textTransform:"none",whiteSpace:"noWrap",justifyContent:"flex-start",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},children:e.jsx(Z,{sx:{fontSize:"13px"},children:d.name||"No Tool"})}),e.jsx(G,{size:"small",sx:{p:.25},onClick:()=>{},children:e.jsx(X,{icon:tt,width:16})})]},l))]})}function Cn({searchText:t,moveUpper:i,anchorWidth:s,openPopover:a,selectedIndex:c,onClosePopover:n,onSelectIndex:r}){const d=se(),l=Ae("up","lg");return e.jsx(he,{open:a,onClose:n,arrow:"bottom-left",style:{transform:"translateY(-4px)"},sx:{ml:l?0:.9,p:0,width:s,maxWidth:s,height:408,maxHeight:500,boxShadow:d.customShadows.z4},hiddenArrow:!0,disableAutoFocus:!0,disableEnforceFocus:!0,children:e.jsx(Rt,{selectedIndex:c,onSelectIndex:r,layout:"compact",searchText:t})})}function vn({searchText:t,moveUpper:i,anchorWidth:s,openPopover:a,selectedTools:c,onClosePopover:n,onSelectTools:r}){const d=se(),l=Ae("up","lg");return e.jsx(he,{open:a,onClose:n,arrow:"bottom-left",style:{transform:"translateY(-4px)"},sx:{ml:l?0:.9,p:0,width:s,maxWidth:s,height:406,maxHeight:500,boxShadow:d.customShadows.z4},hiddenArrow:!0,disableAutoFocus:!0,disableEnforceFocus:!0,children:e.jsx(Pt,{selectedTools:c,onSelectTools:r,layout:"compact",searchText:t})})}function kn({onSend:t,chatMode:i,disabled:s,participants:a,onSetChatMode:c,onSelectIndex:n,onSelectTools:r,selectedTools:d,selectedKbIndex:l}){var V;const o=se(),h=p.useRef(null),f=p.useRef(null),[C,k]=p.useState(0),[y,j]=p.useState(""),[g,w]=p.useState([]),[T,S]=p.useState(0),[x]=p.useState(!1),[O,I]=p.useState([]),[B,U]=p.useState(null),[$,M]=p.useState(null),[K,N]=p.useState(null),[z,v]=p.useState(null),{kmmList:Y}=zt(0),Q=(V=Y.find(u=>u.index===l))==null?void 0:V.name,D=g.map(u=>({src:u.preview})),W=ke(D),ne=a===null?[]:a.map(u=>u.id),le=u=>{W.onOpen(u)},me=u=>{U(u.currentTarget)},ue=()=>{N(null)},R=u=>{N(u.currentTarget)},L=()=>{M(null)},P=()=>{M(h.current)},H=()=>{v(null)},te=()=>{v(h.current)},J=u=>{i==="rag"&&u.target.value.startsWith("#")?M(h.current):i==="open-chat"&&u.target.value.startsWith("#")?N(f.current):i==="function-calling"&&u.target.value.startsWith("#")?v(h.current):(M(null),v(null))},ce=u=>{I(m=>[u,...m])},oe=p.useCallback(u=>{I(m=>m.filter((E,xe)=>xe!==u))},[I]);p.useEffect(()=>{const u=setTimeout(()=>{de()},50);return()=>clearTimeout(u)},[y]),p.useEffect(()=>{(K||$||z)&&h.current&&S(h.current.offsetWidth)},[K,$,z]),p.useEffect(()=>{const u=()=>{h.current&&S(h.current.offsetWidth)};return window.addEventListener("resize",u),u(),()=>window.removeEventListener("resize",u)},[]);const de=()=>{const u=document.querySelector(".llm-input");if(u){let m;u.clientHeight<60?m=1:u.clientHeight>=60&&u.clientHeight<80?m=2:u.clientHeight>=80&&u.clientHeight<100?m=3:m=4,k(m)}},Ie=u=>{(u.metaKey||u.ctrlKey)&&u.key==="Enter"?ie():u.key==="Enter"?y.startsWith("#http")&&i==="open-chat"&&(u.preventDefault(),Re()):(u.metaKey||u.ctrlKey)&&u.key.toLowerCase()==="a"?c("rag"):(u.metaKey||u.ctrlKey)&&u.key.toLowerCase()==="u"?c("function-calling"):(u.metaKey||u.ctrlKey)&&u.key.toLowerCase()==="e"&&c("open-chat")},Re=()=>{y.startsWith("#http")&&(ce(y.slice(1)),j(""),ue())},ie=()=>{!y||a===null||(t({content:y,senderId:"user",mode:"new",attachments:g,sources:O.map(u=>({label:u,url:u}))}),t({content:"(SYS)Working on it...",senderId:ne[0],mode:"new"}),j(""),w([]),I([]),k(1))},q=p.useCallback(u=>{const m=u.map(E=>Object.assign(E,{preview:URL.createObjectURL(E)}));w([...g,...m])},[g]),ge=p.useCallback(u=>{const m=g.filter(E=>E!==u);w(m)},[g]);let re;return g.length>0||O.length>0||i==="rag"||i==="function-calling"?re=1:C<2?re=20:C===2?re=2.5:C===3?re=2:re=1.5,e.jsxs(_,{ref:h,sx:{minHeight:52,display:"flex",position:"absolute",alignItems:"center",bottom:-64,width:"100%",paddingLeft:o.spacing(1),backgroundColor:o.palette.background.paper,py:.5,boxShadow:x?`0 0 1px 0 ${F(o.palette.mode==="light"?o.palette.grey[500]:o.palette.grey[200],.32)}, 0 1px 10px 2px ${F(o.palette.mode==="light"?o.palette.grey[800]:o.palette.grey[700],.1)}`:`0 0 1px 0 ${F(o.palette.mode==="light"?o.palette.grey[500]:o.palette.grey[200],.32)}, 0 1px 4px -1px ${F(o.palette.mode==="light"?o.palette.grey[800]:o.palette.grey[700],.34)}`,borderRadius:re},children:[e.jsxs(b,{sx:{mr:1},children:[e.jsx(G,{size:"small",onClick:me,children:e.jsx(A,{icon:Ye,width:22})}),e.jsx(jn,{openPopover:B,setMessage:j,setOpenPopover:U})]}),e.jsxs(b,{sx:{width:"100%"},alignItems:"center",children:[e.jsx(b,{direction:"row",flexWrap:"wrap",sx:{display:g.length===0?"none":"flex",width:"100%",mt:.75,ml:-1},children:e.jsx(Ot,{thumbnail:!0,files:g,onRemove:u=>ge(u),sx:{width:64,height:64},onClick:le})}),e.jsx(b,{spacing:1,direction:"row",flexWrap:"wrap",sx:{display:O.length===0?"none":"flex",width:"100%",mt:.75,mb:.5},children:O.map((u,m)=>e.jsx(cs,{id:m,website:u,onRemoveWebsite:oe},m))}),e.jsxs(b,{spacing:1,direction:"row",flexWrap:"wrap",sx:{display:i==="rag"||i==="function-calling"?"flex":"none",width:"100%",mt:.75,mb:.5},children:[i==="rag"&&e.jsx(yn,{kb:Q,onOpenKbPopover:P}),i==="function-calling"&&e.jsx(Sn,{selectedTools:d,onOpenToolPopover:te})]}),e.jsx(ot,{className:"llm-input",multiline:!0,maxRows:10,fullWidth:!0,value:y,disableUnderline:!0,onKeyDown:Ie,onChange:u=>{j(u.target.value),J(u)},placeholder:"Enter a prompt",endAdornment:e.jsxs(b,{direction:"row",sx:{mr:1.25,"& > *":{mx:.25}},alignItems:"center",children:[e.jsx(Tt,{onClick:()=>{},disabled:i!=="open-chat",onDrop:q}),e.jsx(G,{disabled:s,size:"small",onClick:()=>{},children:e.jsx(A,{icon:It,width:20,height:20})}),e.jsx(G,{ref:f,size:"small",sx:{width:30,height:30},onClick:R,children:e.jsx(X,{width:18,icon:"mdi:web-plus"})})]}),sx:{pb:.5}})]}),e.jsx(ve,{orientation:"vertical",flexItem:!0}),e.jsx(ee,{size:"small",variant:"text",color:"primary",onClick:ie,disabled:y.trim().length===0,startIcon:e.jsx(A,{icon:"ic:round-send",width:22,height:22,color:y.trim().length===0?"":We[i]}),sx:{width:38,height:38,minWidth:38,maxWidth:38,borderRadius:5,mx:1,mr:.75,"& .MuiButton-startIcon":{mx:-4}}}),e.jsx(Te,{index:W.selected,slides:D,open:W.open,close:W.onClose}),e.jsx(ds,{url:y.startsWith("#")?y.slice(1):"",moveUpper:O.length>0||i==="rag",anchorWidth:T,openPopover:K,onClosePopover:ue,onAddWebsite:ce}),e.jsx(Cn,{searchText:y.slice(1),selectedIndex:l,moveUpper:O.length>0||i==="rag",anchorWidth:T,openPopover:$,onClosePopover:L,onSelectIndex:n}),e.jsx(vn,{searchText:y.slice(1),selectedTools:d,moveUpper:O.length>0||i==="function-calling",anchorWidth:T,openPopover:z,onClosePopover:H,onSelectTools:r})]})}const Tn={id:"user",name:"Admin"},yt=[{id:"assistant",name:"GPT"}];function In({chatMode:t,messages:i,configurations:s,selectedIndex:a,selectedTools:c,onSelectIndex:n,onSelectTools:r,onSetChatMode:d,onUpdateMessages:l,onOpenRagSourcePopover:o}){const{tools:h}=Oe(),f=h.filter(w=>c.includes(w.id)&&w.meta.trim()!=="").map(w=>JSON.parse(w.meta)),C=s[`${t}-Past messages included`],k=w=>{const{messageId:T,message:S,contentType:x,sources:O,function_calls:I,createdAt:B,senderId:U,mode:$,log_timestamp:M,attachments:K,thoughts:N}=w,z={id:T,body:S,contentType:x,sources:O,function_calls:I,createdAt:B,senderId:U,mode:$,chatMode:t,log_timestamp:M,attachments:K,thoughts:N};l(v=>{const Y=v.findIndex(D=>D.id===T);if(!S)return[...v];if(Y===-1){if($==="attach"){if(S.startsWith("(SYS)function")){const W={...v[v.length-1],body:S,function_calls:I};return S.startsWith("(SYS)function executed")&&pt({mode:t,onSend:g,request:Ce([...v.slice(0,-1),W],t,C,s,[],f),shouldStream:s[`${t}-Should stream`],aoaiResourceName:s[`${t}-Deployment`],indexName:a,systemPrompt:s[`${t}-System message`]}),[...v.slice(0,-1),W]}const D=v[v.length-1].function_calls;return[...v.slice(0,-1),{...v[v.length-1],body:S,...N&&{thoughts:N},...D&&{function_calls:D}}]}return $==="new"&&S!=="(SYS)Working on it..."&&U==="assistant"?[...v.slice(0,-1),z]:$==="new"&&U==="user"?(pt({mode:t,onSend:g,request:Ce([...v,z],t,C,s,[],f),indexName:a,shouldStream:s[`${t}-Should stream`],aoaiResourceName:s[`${t}-Deployment`],systemPrompt:s[`${t}-System message`]}),[...v,z]):[...v,z]}const Q=[...v];return Q[Y]=z,Q})},y=[yt[0]],j={id:"1",participants:[Tn,yt[0]],type:"ONE_TO_ONE",unreadCount:0,messages:i},g=({content:w,senderId:T,mode:S,sources:x=[],function_calls:O=[],msgId:I=void 0,timestamp:B=void 0,attachments:U=[],thoughts:$=[]})=>{k({conversationId:"1",messageId:I===void 0?et():I,message:w,contentType:"text",sources:x,function_calls:O,createdAt:new Date,senderId:T,mode:S,chatMode:t,log_timestamp:B,attachments:U,thoughts:$})};return e.jsxs(b,{sx:{width:1,height:1,overflow:"hidden"},children:[e.jsx(mn,{conversation:j,chatMode:t,onSend:g,onSetChatMode:d,onOpenRagSourcePopover:o}),e.jsx(kn,{disabled:!0,chatMode:t,onSend:g,participants:y,onSetChatMode:d,onSelectIndex:n,onSelectTools:r,selectedTools:c,selectedKbIndex:a})]})}function Rn({mlApp:t}){const i=Fe(),s=ae(),a=ae(),[c,n]=p.useState(),[r,d]=p.useState("rag"),[l,o]=p.useState([]),[h,f]=p.useState("All"),C=i.themeLayout==="horizontal",k=ye(qe),y=k?k.map(v=>v.resourceName):[],j=k?k.filter(v=>v.primary):[],g=j&&j.length>0?j[0].resourceName:"";let w="";g.length>0?w=g:y&&y.length>0&&(w=y[0]);const T=ye(t.id),S=Je(w),[x,O]=p.useState({...S,...T}),[I]=p.useState(t.content||""),[B,U]=p.useState(x.selectedTools||[]),$=v=>{O(v),be(t.id,v)},M=v=>{},K=v=>{U(v),O({...x,selectedTools:v}),be(t.id,{...x,selectedTools:v})},N=()=>{o([])},z=p.useCallback((v,Y)=>{n(v),f(Y),a.onTrue()},[a]);return e.jsxs(e.Fragment,{children:[e.jsxs(b,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:.5},children:[e.jsx(ee,{to:Me.gbbai.appGallery.root,component:He,size:"small",color:"inherit",startIcon:e.jsx(A,{icon:Ge,style:{marginRight:"-5px"}}),sx:{display:"flex"},children:"Back"}),e.jsxs(b,{direction:"row",alignItems:"center",children:[e.jsx(Qe,{color:"default",sx:{textTransform:"None",mr:1.5},children:x[`${r}-Deployment`]||"No GPT deployment"}),e.jsx(Ue,{title:"Clear histroy",children:e.jsx(G,{size:"small",color:"default",onClick:N,sx:{width:36,height:36},children:e.jsx(Se,{src:"/assets/icons/modules/ic-sweep.svg",sx:{width:22,height:22}})})}),e.jsx(G,{size:"small",color:"default",onClick:s.onTrue,sx:{width:36,height:36},children:e.jsx(Se,{src:"/static/icons/apps/ic_settings.svg",sx:{width:20,height:20}})})]})]}),e.jsx(_,{sx:{height:C?"calc(100vh - 328px)":"calc(100vh - 204px)",display:"flex",position:"relative",overflow:"visible"},children:e.jsx(In,{messages:l,onUpdateMessages:o,configurations:x,selectedIndex:I,chatMode:r,onSetChatMode:d,onOpenRagSourcePopover:z,onSelectIndex:M,selectedTools:B,onSelectTools:K})}),e.jsx(Ve,{open:s.value,callerId:t.id,onClose:s.onFalse,configurations:x,onUpdate:$,selectedIndex:I,onSelectIndex:M,selectedTools:B,onSelectTools:K,tabs:["rag"]}),e.jsx(Ft,{open:a.value,onClose:a.onFalse,ragThoughts:c,selectedSource:h})]})}function Pn({title:t,content:i,icon:s,chatMode:a,onSend:c}){const n=r=>{r&&(c({content:r,senderId:"user",mode:"new",status:"running"}),c({content:"(SYS)Working on it...",senderId:"assistant",mode:"new",status:"running"}))};return e.jsx(ze,{sx:{px:1,py:.25,borderRadius:1.25,bgcolor:"background.white",boxShadow:r=>r.customShadows.z3,"&:hover":{boxShadow:r=>r.customShadows.z20},...a.includes(t.split(" ")[0].toLowerCase())&&{borderColor:"transparent",bgcolor:"background.paper",boxShadow:r=>r.customShadows.z16}},onClick:()=>n(i),children:e.jsxs(b,{direction:"row",spacing:1.5,sx:{px:.5,py:0},alignItems:"center",justifyContent:"space-between",children:[e.jsxs(b,{sx:{pb:1.5},children:[e.jsx(b,{direction:"row",spacing:1.25,sx:{p:1},alignItems:"center",children:e.jsx(Z,{variant:"h6",sx:{color:We[a]},children:t})}),e.jsx(Z,{variant:"body2",sx:{px:1,display:"-webkit-box",overflow:"hidden",textOverflow:"ellipsis",WebkitBoxOrient:"vertical",WebkitLineClamp:1},children:i})]}),!!s&&s]})})}const An=["jpg","gif","png","gif","bmp","svg","webp"],St=new RegExp(`https.*\\.(${An.join("|")}).*(?=\\))`,"i"),Ct=/!\[.*?\]\((.*?)\)/g,Wn=[{title:"Open chat",content:"Ask any question, and GPT will generate an answer",colorTag:"open-chat"},{title:"RAG",content:"GPT will respond based on the knowledge provided",colorTag:"rag"},{title:"Function calling",content:"GPT will coordinate various functions to execute tasks",colorTag:"function-calling"}];function $n({conversation:t,chatMode:i,onSend:s,onSetChatMode:a,onOpenRagSourcePopover:c}){const{messagesEndRef:n}=Ze(t.messages),r=t.messages.filter(o=>{if(!o.body)return!1;const h=o.body.match(St);return!!(h?h[0]:"")}).map(o=>{if(!o.body)return{src:""};const h=o.body.match(St),f=h?h[0]:"",C=[];let k=Ct.exec(o.body);for(;k!==null;)k[1]!==f&&C.push(k[1]),k=Ct.exec(o.body);return[{src:f},...C.map(y=>({src:y}))]}).flat();t.messages.forEach(o=>{o.attachments!==void 0&&o.attachments.length>0&&o.attachments.forEach(h=>{r.push({src:h.preview})})});const d=ke(r),l=o=>{d.onOpen(o)};return e.jsxs(e.Fragment,{children:[e.jsxs(pe,{ref:n,sx:{py:2,px:1,height:1},children:[e.jsxs(_,{sx:{mx:2,mb:8,mt:0},children:[e.jsx(ps,{title:"AOAI Workbench"}),e.jsx(Z,{variant:"subtitle1",sx:{px:0,mb:1.5,mt:1.5,textAlign:"center",fontWeight:500},children:"Select a mode"}),e.jsx(_,{sx:{display:"grid",gap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(3, 1fr)"},width:"100%"},children:Wn.map(o=>e.jsx(hs,{title:o.title,content:o.content,gradient:At[o.colorTag],chatMode:i,onSetChatMode:a},o.title))}),e.jsx(Z,{variant:"subtitle1",sx:{mb:2,mt:6,textAlign:"center",fontWeight:500},children:"Try following prompts"}),e.jsx(_,{sx:{display:"grid",gap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(3, 1fr)"},width:"100%"},children:ts[i].map(o=>e.jsx(Pn,{title:o.title,content:o.content,icon:o.icon,chatMode:i,onSend:s},o.title))})]}),t.messages.map((o,h)=>e.jsx(ms,{message:o,conversation:t,isLastMessage:h===t.messages.length-1,onOpenLightbox:l,onOpenRagSourcePopover:c},o.id))]}),e.jsx(Te,{index:d.selected,slides:r,open:d.open,close:d.onClose})]})}const Ln={code:[{title:"用Python写一段冒泡排序算法",prompt:"用Python写一段冒泡排序算法"},{title:"用Swift写一段分治算法",prompt:"用Swift写一段分治算法"},{title:"将JSON数据转换成HTML格式的表格",prompt:'将下面的JSON数据转换成一张HTML格式的表格，仅使用HTML，表格需具备表头和列名：{ “resturant employees” :[ {“name”:“Shyam”, “email":“shyamjaiswal@gmail.com”}, {“name”:“Bob”, “email”:“bob32@gmail.com”}, {“name”:“Jai”, “email”:"jai87@gmail.com”} ]}'}],translate:[{title:"La performance du système est plus lente que d'habitude.",prompt:`La performance du système est plus lente que d'habitude. 
      上面这句话是什么语言`},{title:"Mi monitor tiene píxeles que no se iluminan.",prompt:`Mi monitor tiene píxeles que no se iluminan.
      上面这句话是什么语言`},{title:"Mój klawisz Ctrl jest zepsuty.",prompt:`Mój klawisz Ctrl jest zepsuty
      上面这句话是什么语言`}],entityExtraction:[{title:"小明最近购买了一辆自行车",prompt:"请提取段落中的人和出现的物品：小明最近购买了一辆自行车。"},{title:"全省各类经营主体、广大干部职工、各界群众：",prompt:`全省各类经营主体、广大干部职工、各界群众：

时至立夏、水绿荫浓。值此我省第十七个“政务公开日”到来之际，我谨代表辽宁省人民政府向你们发出一封公开信，诚挚欢迎大家通过政务公开监督政府施政，推动政府创新治理理念、加快职能转变，不断提高政务运行效能和政务公开水平，持续优化政策服务，打造一流营商环境，聚力推动全面振兴取得新突破。

推行政务公开，是政府服务人民、依靠人民，对人民负责、接受人民监督的重要制度安排，是保障人民主体地位的具体举措，也是加快建设法治政府的有效途径。习近平总书记强调，要用制度安排把政务公开贯穿政务运行全过程，权力运行到哪里，公开和监督就延伸到哪里，以公开促落实、促规范、促服务。党的十八大以来，党中央、国务院高度重视政务公开工作，坚持以公开为常态、不公开为例外，遵循公正、公平、合法、便民的原则，推动新时代政务公开不断向纵深发展。辽宁省委、省政府认真落实党中央、国务院决策部署，积极主动作为，勇于探索创新，政务公开广度深度稳步拓展、制度体系日趋健全、信息化程度显著提升、功能作用不断增强，推动政务公开工作迈上新台阶。

政务公开与政府施政相伴相生。当前，全省上下正在深入贯彻落实习近平总书记关于东北、辽宁振兴发展的重要讲话和指示批示精神，抢抓“十四五”后三年重要窗口期、机遇期，全力实施全面振兴新突破三年行动，大干三年、奋斗三年，以超常规举措打一场新时代东北振兴、辽宁振兴的“辽沈战役”，在新时代东北振兴上展现更大担当和作为。实现全面振兴新突破，离不开各级政府的忠诚履职、依法行政，也离不开全省人民的积极参与、献计出力，这对政务公开工作提出了新的更高要求。

面对政务公开工作的新形势、新挑战、新任务，全省各级政府将以“5·15”政务公开日为契机，坚持以人民为中心的发展思想，充分发挥积极性、主动性、创造性，转变工作方式，加大工作力度，全面提升政务公开质量和实效，让公开成为自觉，让透明成为常态，加快推进政府治理体系和治理能力现代化，努力建设人民满意的服务型政府。

我们将深入开展政策文件公开，推进依法行政、优化法治环境。发布政策、解读政策、宣传政策，是政务公开的初心使命、根本职责，也是政府治理的重要一环。我们将加快清理规范各类政策文件，及时发现和纠正政策偏差，建设统一的政策文件库，构建以网上发布为主的政策发布新格局，全面优化政策解读，让群众第一时间知晓理解政策、配合执行政策，推动执行机关第一时间贯彻落实，切实做到按法律法规办事、按政策规章办事、在群众监督下办事。

我们将不断拓展政务公开职能，降低综合成本、减轻企业负担。一个企业、一个项目能否落地，很大程度上是看综合成本有没有比较优势。我们将不断优化政策供给，积极应用数字技术对企业信息和政策要素进行精准匹配，推进惠企政策免申即享、直达快享，进一步提高办事效率、降低制度成本。大力推进水、电、气、暖以及交通、环保等领域公共企事业单位信息公开，依法公开、动态调整行政事业性收费和政府性基金目录，实行清单管理，着力减轻企业经营负担。

我们将积极引导公众参与决策，倾听百姓呼声、汲取群众智慧。企业和群众对政策制定的内容最关注，对政策实施的效果最有发言权。我们将着眼于满足企业和群众的知情权、表达权和参与权，不断完善决策意见征集、采纳、反馈机制，履行好公众参与重大行政决策的法定程序，做到重大情况让人民知道、重大问题经人民讨论。深入开展调查研究，依托政府网站、政务新媒体等渠道，采取民意调查、座谈走访等形式，提高行政决策公众参与度和科学化、民主化、法治化水平。

上下同欲者胜，同舟共济者赢。我们坚信，有党中央的坚强领导，有全省人民的勠力同心，我们有底气、有决心、有能力做好新时代政务公开工作，打好优化营商环境这场攻坚战，为打赢新时代“辽沈战役”奠定坚实基础。我们将牢固树立“人人都是营商环境”的理念，全面发挥政务公开促落实、助监督、强监管作用，主动接受经营主体和广大群众监督，大力发扬“拼抢争实”作风，团结带领全省人民携手并肩拼三年、甩开膀子干三年，为奋力实现辽宁全面振兴新突破，扎实推进中国式现代化辽宁实践作出新的更大贡献。

最后，祝愿全省人民安居乐业、幸福如意，各类经营主体繁荣兴旺、事业长虹！


从上文中，提取信息，包括:“人物姓名”、“政府机关”、“日期”，和“口号”等类型的实体，输出JSON格式内容，并最终采用Markdown格式呈现`}],textSummary:[{title:"客服代表: 你好，欢迎来到小山医疗",prompt:`请总结以下段落：
客服代表: 你好，欢迎来到小山医疗
客户: 你好，我想咨询一些问题
客服代表: 没问题，但首先让我确认您的身份
客户：好的
客服代表：请问您的出生年月是？
客户：1989年5月20号
客服代表：好，验证通过。请问您有什么具体的问题？
客户：我想咨询一下上次我光子嫩肤的退款什么时候能够到账？
客服代表：请让我为您查询
客户：好的
客服代表：根据系统上为您查询到的记录，您的这次退款请求已经被处理，金额将在七个工作日后到账，具体到账时间将会通过短信通知，请您留意
客户：非常感谢
客服代表：还有其他问题吗？
客户：没有了，谢谢
客服代表：太好了，感谢致电小山医疗，祝您生活愉快`},{title:"全省各类经营主体、广大干部职工、各界群众：",prompt:`全省各类经营主体、广大干部职工、各界群众：

时至立夏、水绿荫浓。值此我省第十七个“政务公开日”到来之际，我谨代表辽宁省人民政府向你们发出一封公开信，诚挚欢迎大家通过政务公开监督政府施政，推动政府创新治理理念、加快职能转变，不断提高政务运行效能和政务公开水平，持续优化政策服务，打造一流营商环境，聚力推动全面振兴取得新突破。

推行政务公开，是政府服务人民、依靠人民，对人民负责、接受人民监督的重要制度安排，是保障人民主体地位的具体举措，也是加快建设法治政府的有效途径。习近平总书记强调，要用制度安排把政务公开贯穿政务运行全过程，权力运行到哪里，公开和监督就延伸到哪里，以公开促落实、促规范、促服务。党的十八大以来，党中央、国务院高度重视政务公开工作，坚持以公开为常态、不公开为例外，遵循公正、公平、合法、便民的原则，推动新时代政务公开不断向纵深发展。辽宁省委、省政府认真落实党中央、国务院决策部署，积极主动作为，勇于探索创新，政务公开广度深度稳步拓展、制度体系日趋健全、信息化程度显著提升、功能作用不断增强，推动政务公开工作迈上新台阶。

政务公开与政府施政相伴相生。当前，全省上下正在深入贯彻落实习近平总书记关于东北、辽宁振兴发展的重要讲话和指示批示精神，抢抓“十四五”后三年重要窗口期、机遇期，全力实施全面振兴新突破三年行动，大干三年、奋斗三年，以超常规举措打一场新时代东北振兴、辽宁振兴的“辽沈战役”，在新时代东北振兴上展现更大担当和作为。实现全面振兴新突破，离不开各级政府的忠诚履职、依法行政，也离不开全省人民的积极参与、献计出力，这对政务公开工作提出了新的更高要求。

面对政务公开工作的新形势、新挑战、新任务，全省各级政府将以“5·15”政务公开日为契机，坚持以人民为中心的发展思想，充分发挥积极性、主动性、创造性，转变工作方式，加大工作力度，全面提升政务公开质量和实效，让公开成为自觉，让透明成为常态，加快推进政府治理体系和治理能力现代化，努力建设人民满意的服务型政府。

我们将深入开展政策文件公开，推进依法行政、优化法治环境。发布政策、解读政策、宣传政策，是政务公开的初心使命、根本职责，也是政府治理的重要一环。我们将加快清理规范各类政策文件，及时发现和纠正政策偏差，建设统一的政策文件库，构建以网上发布为主的政策发布新格局，全面优化政策解读，让群众第一时间知晓理解政策、配合执行政策，推动执行机关第一时间贯彻落实，切实做到按法律法规办事、按政策规章办事、在群众监督下办事。

我们将不断拓展政务公开职能，降低综合成本、减轻企业负担。一个企业、一个项目能否落地，很大程度上是看综合成本有没有比较优势。我们将不断优化政策供给，积极应用数字技术对企业信息和政策要素进行精准匹配，推进惠企政策免申即享、直达快享，进一步提高办事效率、降低制度成本。大力推进水、电、气、暖以及交通、环保等领域公共企事业单位信息公开，依法公开、动态调整行政事业性收费和政府性基金目录，实行清单管理，着力减轻企业经营负担。

我们将积极引导公众参与决策，倾听百姓呼声、汲取群众智慧。企业和群众对政策制定的内容最关注，对政策实施的效果最有发言权。我们将着眼于满足企业和群众的知情权、表达权和参与权，不断完善决策意见征集、采纳、反馈机制，履行好公众参与重大行政决策的法定程序，做到重大情况让人民知道、重大问题经人民讨论。深入开展调查研究，依托政府网站、政务新媒体等渠道，采取民意调查、座谈走访等形式，提高行政决策公众参与度和科学化、民主化、法治化水平。

上下同欲者胜，同舟共济者赢。我们坚信，有党中央的坚强领导，有全省人民的勠力同心，我们有底气、有决心、有能力做好新时代政务公开工作，打好优化营商环境这场攻坚战，为打赢新时代“辽沈战役”奠定坚实基础。我们将牢固树立“人人都是营商环境”的理念，全面发挥政务公开促落实、助监督、强监管作用，主动接受经营主体和广大群众监督，大力发扬“拼抢争实”作风，团结带领全省人民携手并肩拼三年、甩开膀子干三年，为奋力实现辽宁全面振兴新突破，扎实推进中国式现代化辽宁实践作出新的更大贡献。

最后，祝愿全省人民安居乐业、幸福如意，各类经营主体繁荣兴旺、事业长虹！


阅读上文，并生成100字左右的摘要`},{title:"Azure AI Studio 专为开发人员设计，用于：在企业级平台上构建生成式 AI 应用程序",prompt:`从下面这段话中生成不超过50字的摘要, 
      “Azure AI Studio 专为开发人员设计，用于：
      在企业级平台上构建生成式 AI 应用程序。
      直接从工作室，可以首先通过 Azure AI SDK 和 Azure AI CLI 与项目代码交互。
      Azure AI Studio 是一个受信任的包容性平台，它使所有能力和首选项的开发人员都能通过 AI 进行创新并塑造未来。
      使用先进的 AI 工具和 ML 模型无缝探索、生成、测试和部署，这些模型基于负责任 AI 实践。
      作为一个团队进行构建。 Azure AI 资源提供企业级安全性以及一个协作环境，其中包含共享文件和与预先训练的模型、数据和计算的连接。
      组织你的方式。 项目有助于保存状态，使你可以从第一个想法到第一个原型，再到第一个生产部署进行迭代。 还可以轻松邀请其他人参与此旅程。
      使用 Azure AI Studio，可以评估大型语言模型 (LLM) 响应，并使用提示流协调提示应用程序组件以获得更好的性能。 该平台简化了可伸缩性，可以轻松地将概念证明转换为全面的生产。 持续监视和优化支持长期成功。”`}],sentiment:[{title:"刚买完两天就降价，你逗我呢。散热比较差，建议空调开低点，电风扇对着吹比较好",prompt:`刚买完两天就降价，你逗我呢。散热比较差，建议空调开低点，电风扇对着吹比较好。
对上文进行情感分析，并将其分类为积极、消极或中立`},{title:"全省各类经营主体、广大干部职工、各界群众：",prompt:`全省各类经营主体、广大干部职工、各界群众：

时至立夏、水绿荫浓。值此我省第十七个“政务公开日”到来之际，我谨代表辽宁省人民政府向你们发出一封公开信，诚挚欢迎大家通过政务公开监督政府施政，推动政府创新治理理念、加快职能转变，不断提高政务运行效能和政务公开水平，持续优化政策服务，打造一流营商环境，聚力推动全面振兴取得新突破。

推行政务公开，是政府服务人民、依靠人民，对人民负责、接受人民监督的重要制度安排，是保障人民主体地位的具体举措，也是加快建设法治政府的有效途径。习近平总书记强调，要用制度安排把政务公开贯穿政务运行全过程，权力运行到哪里，公开和监督就延伸到哪里，以公开促落实、促规范、促服务。党的十八大以来，党中央、国务院高度重视政务公开工作，坚持以公开为常态、不公开为例外，遵循公正、公平、合法、便民的原则，推动新时代政务公开不断向纵深发展。辽宁省委、省政府认真落实党中央、国务院决策部署，积极主动作为，勇于探索创新，政务公开广度深度稳步拓展、制度体系日趋健全、信息化程度显著提升、功能作用不断增强，推动政务公开工作迈上新台阶。

政务公开与政府施政相伴相生。当前，全省上下正在深入贯彻落实习近平总书记关于东北、辽宁振兴发展的重要讲话和指示批示精神，抢抓“十四五”后三年重要窗口期、机遇期，全力实施全面振兴新突破三年行动，大干三年、奋斗三年，以超常规举措打一场新时代东北振兴、辽宁振兴的“辽沈战役”，在新时代东北振兴上展现更大担当和作为。实现全面振兴新突破，离不开各级政府的忠诚履职、依法行政，也离不开全省人民的积极参与、献计出力，这对政务公开工作提出了新的更高要求。

面对政务公开工作的新形势、新挑战、新任务，全省各级政府将以“5·15”政务公开日为契机，坚持以人民为中心的发展思想，充分发挥积极性、主动性、创造性，转变工作方式，加大工作力度，全面提升政务公开质量和实效，让公开成为自觉，让透明成为常态，加快推进政府治理体系和治理能力现代化，努力建设人民满意的服务型政府。

我们将深入开展政策文件公开，推进依法行政、优化法治环境。发布政策、解读政策、宣传政策，是政务公开的初心使命、根本职责，也是政府治理的重要一环。我们将加快清理规范各类政策文件，及时发现和纠正政策偏差，建设统一的政策文件库，构建以网上发布为主的政策发布新格局，全面优化政策解读，让群众第一时间知晓理解政策、配合执行政策，推动执行机关第一时间贯彻落实，切实做到按法律法规办事、按政策规章办事、在群众监督下办事。

我们将不断拓展政务公开职能，降低综合成本、减轻企业负担。一个企业、一个项目能否落地，很大程度上是看综合成本有没有比较优势。我们将不断优化政策供给，积极应用数字技术对企业信息和政策要素进行精准匹配，推进惠企政策免申即享、直达快享，进一步提高办事效率、降低制度成本。大力推进水、电、气、暖以及交通、环保等领域公共企事业单位信息公开，依法公开、动态调整行政事业性收费和政府性基金目录，实行清单管理，着力减轻企业经营负担。

我们将积极引导公众参与决策，倾听百姓呼声、汲取群众智慧。企业和群众对政策制定的内容最关注，对政策实施的效果最有发言权。我们将着眼于满足企业和群众的知情权、表达权和参与权，不断完善决策意见征集、采纳、反馈机制，履行好公众参与重大行政决策的法定程序，做到重大情况让人民知道、重大问题经人民讨论。深入开展调查研究，依托政府网站、政务新媒体等渠道，采取民意调查、座谈走访等形式，提高行政决策公众参与度和科学化、民主化、法治化水平。

上下同欲者胜，同舟共济者赢。我们坚信，有党中央的坚强领导，有全省人民的勠力同心，我们有底气、有决心、有能力做好新时代政务公开工作，打好优化营商环境这场攻坚战，为打赢新时代“辽沈战役”奠定坚实基础。我们将牢固树立“人人都是营商环境”的理念，全面发挥政务公开促落实、助监督、强监管作用，主动接受经营主体和广大群众监督，大力发扬“拼抢争实”作风，团结带领全省人民携手并肩拼三年、甩开膀子干三年，为奋力实现辽宁全面振兴新突破，扎实推进中国式现代化辽宁实践作出新的更大贡献。

最后，祝愿全省人民安居乐业、幸福如意，各类经营主体繁荣兴旺、事业长虹！


对上文进行情感分析，并将其分类为积极、消极或中立`},{title:"我今天吃了米饭。",prompt:`我今天吃了米饭。 
对上面这句话进行情感分析，并判断其属于下列类别中的哪一类：1. 积极、2. 消极、3.中立。`}],task:[{title:"提供北京到上海的交通路线",prompt:"“提供北京到上海的交通路线”，判断这句话的意图属于下列选项中的哪一项，只回答选项编号：1.交通查询；2.采购；3.查询数据；4.翻译；5.生成摘要"},{title:"提取这句话中的出发地，目的地和途径点",prompt:"“北京到上海的交通路线，中途经过天津和廊坊”，提取这句话中的出发地，目的地和途径点，使用下面的JSON格式回复结果：{“出发地”：“xx”, “途经点”：[“xx”, “xx”, …], “目的地”，“xx”}"}],textGeneration:[{title:"请用礼貌得体的语言修改以下的请假模版",prompt:"请用礼貌得体的语言修改以下的请假模版： 今天我生病了，没法工作。我下午三点到四点要请假去医院看病，所以下午的周会我就先不参加了。"},{title:"阅读下面这则用户的商品评价，并生成合理的回复",prompt:"阅读下面这则用户的商品评价，并生成合理的回复： 刚买完两天就降价，你逗我呢。散热比较差，建议空调开低点，电风扇对着吹比较好"}],functionCalling:[{title:"Display the current video stream of the street camera",prompt:"Display the current video stream of the street camera"},{title:"Stock: show the stock price history of Microsoft in Novemer, 2023",prompt:`Show the stock price history of Microsoft from Nov.20 to Dec.10, 2023.

Remember: 
1. Organize the data in a table.
2. Use YYYY-MM-DD format for date information.
3. If there are decimals, please keep two places after the decimal point.`},{title:"Stock: show the Apple's stock price in Novemer, 2023",prompt:`Show the stock price history of Apple in November, 2023.

Remember: 
1. Organize the data in a table.
2. Use YYYY-MM-DD format for date information.
3. If there are decimals, please keep two places after the decimal point.`},{title:"Draw an image about flowers",prompt:"The 3D illustration of leaves and flowers in bright colors. It has a soft and whimsical feel"},{title:"Draw an image about Hokusai painting",prompt:"This scene is a Hokusai painting with The Great Wave off Kanagawa style, croissant on a plate, pexels contest winner, aspect ratio 16:9, cgsocietywlop, 8 h, golden cracks, the artist has used bright, picture of a loft in morning, object features, stylized border, pastry, french emperor."},{title:"Bing search: where will the 2032 olympics be held?",prompt:"Where will the 2032 olympics be held?"},{title:"Bing search: where will the 2040 olympics be held?",prompt:"Where will the 2040 olympics be held?"},{title:"Time query: 深圳现在几点钟？",prompt:"深圳现在几点钟？"},{title:"Bing search: 2032年奥运会在哪个城市举办？",prompt:"2032年奥运会在哪个城市举办？"},{title:"Bing search: 中国八达岭长城有多长？起点和终点在哪里？",prompt:"中国八达岭长城有多长？起点和终点在哪里？"},{title:"Sales: 按月份比较2022年和2023的产品销量。",prompt:"按月份比较2022年和2023的产品销量，在一张表里呈现。"},{title:"Stock: 显示Microsoft从2023年11月20日到12月10日的股票价格历史。",prompt:`显示Microsoft从2023年11月20日到12月10日的股票价格历史。
      记住：
      1. 将数据组织成一张表。
      2. 日期信息使用YYYY-MM-DD格式。
      3. 如果有小数，请保留小数点后两位。`},{title:"Draw: 一只鲸鲨在夜晚的静水中游过皮划艇底部，从上方观看，详细",prompt:"一只鲸鲨在夜晚的静水中游过皮划艇底部，从上方观看，详细。"},{title:"Draw: 明亮的颜色中的叶子和花朵的3D插图。它有一种柔和和异想天开的感觉",prompt:"明亮的颜色中的叶子和花朵的3D插图。它有一种柔和和异想天开的感觉。"},{title:"Video: 显示街头摄像头的当前的监控视频",prompt:"显示街头摄像头的当前的监控视频"},{title:"Video: 显示十字路口的监控视频",prompt:"显示十字路口的监控视频"}]};function Dn({openPopover:t,setOpenPopover:i,setMessage:s}){const[a,c]=p.useState("code"),n=()=>{i(null)},r=[{label:"coding",value:"code",icon:e.jsx(A,{icon:lt,width:20,height:20})},{label:"translate",value:"translate",icon:e.jsx(A,{icon:Nt,width:20,height:20})},{label:"entity extraction",value:"entityExtraction",icon:e.jsx(A,{icon:_t,width:20,height:20})},{label:"Text summary",value:"textSummary",icon:e.jsx(A,{icon:ct,width:20,height:20})},{label:"sentiment analysis",value:"sentiment",icon:e.jsx(A,{icon:Kt,width:20,height:20})},{label:"task execution",value:"task",icon:e.jsx(A,{icon:Et,width:20,height:20})},{label:"text generation",value:"textGeneration",icon:e.jsx(A,{icon:Bt,width:20,height:20})},{label:"function calling",value:"functionCalling",icon:e.jsx(A,{icon:Xe,width:20,height:20})}],d=r.filter(l=>l.value===a)[0].label;return e.jsxs(he,{open:t,onClose:n,arrow:"bottom-center",sx:{width:360},hiddenArrow:!0,children:[e.jsx(Z,{variant:"subtitle1",sx:{py:1,pb:1.5,px:1},children:"Prompt library"}),e.jsx(ve,{sx:{borderStyle:"dashed"}}),e.jsx(b,{children:e.jsx(rt,{value:a,scrollButtons:"auto",variant:"scrollable",allowScrollButtonsMobile:!0,onChange:(l,o)=>{c(o)},sx:{my:1,mx:1,justifyContent:"center",borderBottom:1,borderColor:"divider"},children:r.map(l=>e.jsx(at,{disableRipple:!0,value:l.value,style:{marginRight:12,minWidth:30,maxWidth:48},icon:l.icon},l.value))})}),e.jsx(pe,{sx:{mt:1,height:{xs:300,sm:380}},children:e.jsx(nt,{disablePadding:!0,subheader:e.jsx(Ke,{disableSticky:!0,sx:{py:.5,px:1,typography:"overline"},children:d}),children:e.jsx(_e.div,{variants:it().inUp,children:Ln[a].map((l,o)=>e.jsx(us,{selected:!1,onSelectQuery:s,title:l.title,prompt:l.prompt},o))})})})]})}function zn({kb:t,onOpenKbPopover:i}){const s=se();return e.jsxs(b,{direction:"row",spacing:1,alignItems:"center",onClick:i,sx:{cursor:"pointer",position:"relative",py:.5,px:1.25,maxWidth:200,border:`${F(s.palette.divider,.18)} 1px solid`,borderRadius:.75},children:[e.jsx(st,{file:"folder",sx:{width:18,height:18}}),e.jsx(_,{sx:{width:"100%",fontSize:"12px",overflow:"auto",textTransform:"none",whiteSpace:"noWrap",justifyContent:"flex-start",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},children:e.jsx(Z,{sx:{fontSize:"13px"},children:t||"No knowledge base"})})]})}function Fn({selectedTools:t,onOpenToolPopover:i}){const s=se(),{tools:a,toolsLoading:c,toolsRefetching:n}=Oe(),r=a.filter(d=>t==null?void 0:t.includes(d.id));return e.jsxs(e.Fragment,{children:[(!r||!t||r.length===0)&&e.jsxs(b,{direction:"row",spacing:1,alignItems:"center",onClick:i,sx:{p:.5,borderRadius:2,cursor:"pointer",background:`${F(s.palette.divider,.22)}`},children:[e.jsx(we,{alt:"placeholder",src:"/assets/icons/navbar/ic_tool.svg",sx:{width:20,height:20}}),e.jsx(Z,{sx:{fontSize:"13px",mr:.75},children:"No Tool"})]}),(c||n)&&t&&[...Array(t.length)].map((d,l)=>e.jsxs(b,{direction:"row",spacing:1,alignItems:"center",sx:{p:.5,borderRadius:2,background:`${F(s.palette.divider,.22)}`},children:[e.jsx(we,{alt:"placeholder",src:"/assets/icons/navbar/ic_tool.svg",sx:{width:20,height:20}}),e.jsx(Le,{variant:"rectangular",width:60,height:10,sx:{borderRadius:1,mr:.75}})]},l)),!c&&r&&r.length>0&&r.map((d,l)=>e.jsxs(b,{direction:"row",spacing:1,alignItems:"center",onClick:i,sx:{p:.5,maxWidth:200,borderRadius:2,cursor:"pointer",background:`${F(s.palette.divider,.14)}`},children:[e.jsx(we,{alt:d.name,src:d.cover,sx:{width:20,height:20}}),e.jsx(_,{sx:{width:"100%",fontSize:"12px",overflow:"auto",textTransform:"none",whiteSpace:"noWrap",justifyContent:"flex-start",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},children:e.jsx(Z,{sx:{fontSize:"13px"},children:d.name||"No Tool"})}),e.jsx(G,{size:"small",sx:{p:.25},onClick:()=>{},children:e.jsx(X,{icon:tt,width:16})})]},l))]})}function On({chatMode:t,onSetChatMode:i}){const s=p.useRef(null),[a,c]=p.useState(!1),[n,r]=p.useState(null),d=o=>{r(o.currentTarget),c(!0)},l=()=>{r(null),c(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(ee,{ref:s,variant:"contained",onClick:d,onMouseEnter:()=>c(!0),onMouseLeave:()=>n===null&&c(!1),startIcon:e.jsx(A,{icon:Bs}),sx:{width:a?"auto":"36px",maxWidth:a?"auto":"36px",minWidth:a?"auto":"36px",height:"36px",padding:1,paddingRight:a?2.3:1,borderRadius:18,color:"white",whiteSpace:"nowrap",mr:1,background:At[t],"& .MuiButton-startIcon":{mx:a?1:0}},children:a?t:""}),e.jsxs(he,{open:n,onClose:l,arrow:"bottom-center",sx:{width:176},hiddenArrow:!0,children:[e.jsxs($e,{sx:{color:"text.secondary",mb:.5},onClick:()=>i("open-chat"),children:[e.jsx(Ee,{sx:{width:20,mr:0},children:e.jsx(A,{icon:xs,width:20,height:20})}),e.jsx(Ne,{primary:"Open-chat",primaryTypographyProps:{variant:"body2"}})]}),e.jsxs($e,{sx:{color:"text.secondary",mb:.5},onClick:()=>i("rag"),children:[e.jsx(Ee,{sx:{width:20,mr:0},children:e.jsx(A,{icon:gs,width:20,height:20})}),e.jsx(Ne,{primary:"RAG",primaryTypographyProps:{variant:"body2"}})]}),e.jsxs($e,{sx:{color:"text.secondary"},onClick:()=>i("function-calling"),children:[e.jsx(Ee,{sx:{width:20,mr:0},children:e.jsx(A,{icon:Xe,width:22,height:22})}),e.jsx(Ne,{primary:"Function-calling",primaryTypographyProps:{variant:"body2"}})]})]})]})}function Nn({searchText:t,moveUpper:i,anchorWidth:s,openPopover:a,selectedIndex:c,onClosePopover:n,onSelectIndex:r}){const d=se(),l=Ae("up","lg");return e.jsx(he,{open:a,onClose:n,arrow:"bottom-left",style:{transform:"translateY(-4px)"},sx:{ml:l?0:.9,p:0,width:s,maxWidth:s,height:408,maxHeight:500,boxShadow:d.customShadows.z4},hiddenArrow:!0,disableAutoFocus:!0,disableEnforceFocus:!0,children:e.jsx(Rt,{selectedIndex:c,onSelectIndex:r,layout:"compact",searchText:t})})}function En({searchText:t,moveUpper:i,anchorWidth:s,openPopover:a,selectedTools:c,onClosePopover:n,onSelectTools:r}){const d=se(),l=Ae("up","lg");return e.jsx(he,{open:a,onClose:n,arrow:"bottom-left",style:{transform:"translateY(-4px)"},sx:{ml:l?0:.9,p:0,width:s,maxWidth:s,height:406,maxHeight:500,boxShadow:d.customShadows.z4},hiddenArrow:!0,disableAutoFocus:!0,disableEnforceFocus:!0,children:e.jsx(Pt,{selectedTools:c,onSelectTools:r,layout:"compact",searchText:t})})}function Bn({status:t,onSend:i,chatMode:s,disabled:a,participants:c,onSetChatMode:n,onSelectIndex:r,onSelectTools:d,selectedTools:l,selectedKbIndex:o}){var u;const h=se(),f=p.useRef(null),C=p.useRef(null),[k,y]=p.useState(0),[j,g]=p.useState(""),[w,T]=p.useState([]),[S,x]=p.useState(0),[O]=p.useState(!1),[I,B]=p.useState([]),[U,$]=p.useState(null),[M,K]=p.useState(null),[N,z]=p.useState(null),[v,Y]=p.useState(null),{kmmList:Q}=zt(0),D=(u=Q.find(m=>m.index===o))==null?void 0:u.name,W=w.map(m=>({src:m.preview})),ne=ke(W),le=c===null?[]:c.map(m=>m.id),me=m=>{ne.onOpen(m)},ue=m=>{$(m.currentTarget)},R=()=>{z(null)},L=m=>{z(m.currentTarget)},P=()=>{K(null)},H=()=>{K(f.current)},te=()=>{Y(null)},J=()=>{Y(f.current)},ce=m=>{s==="rag"&&m.target.value.startsWith("#")?K(f.current):s==="open-chat"&&m.target.value.startsWith("#")?z(C.current):s==="function-calling"&&m.target.value.startsWith("#")?Y(f.current):(K(null),Y(null))},oe=m=>{B(E=>[m,...E])},de=p.useCallback(m=>{B(E=>E.filter((xe,Mt)=>Mt!==m))},[B]);p.useEffect(()=>{const m=setTimeout(()=>{Ie()},50);return()=>clearTimeout(m)},[j]),p.useEffect(()=>{(N||M||v)&&f.current&&x(f.current.offsetWidth)},[N,M,v]),p.useEffect(()=>{const m=()=>{f.current&&x(f.current.offsetWidth)};return window.addEventListener("resize",m),m(),()=>window.removeEventListener("resize",m)},[]);const Ie=()=>{const m=document.querySelector(".llm-input");if(m){let E;m.clientHeight<60?E=1:m.clientHeight>=60&&m.clientHeight<80?E=2:m.clientHeight>=80&&m.clientHeight<100?E=3:E=4,y(E)}},Re=m=>{(m.metaKey||m.ctrlKey)&&m.key==="Enter"?q():m.key==="Enter"?j.startsWith("#http")&&s==="open-chat"&&(m.preventDefault(),ie()):(m.metaKey||m.ctrlKey)&&m.key.toLowerCase()==="a"?n("rag"):(m.metaKey||m.ctrlKey)&&m.key.toLowerCase()==="u"?n("function-calling"):(m.metaKey||m.ctrlKey)&&m.key.toLowerCase()==="e"&&n("open-chat")},ie=()=>{j.startsWith("#http")&&(oe(j.slice(1)),g(""),R())},q=()=>{!j||c===null||(i({content:j,senderId:"user",mode:"new",attachments:w,sources:I.map(m=>({label:m,url:m})),status:"running"}),i({content:"(SYS)Working on it...",senderId:le[0],mode:"new",status:"running"}),g(""),T([]),B([]),y(1))},ge=p.useCallback(m=>{const E=m.map(xe=>Object.assign(xe,{preview:URL.createObjectURL(xe)}));T([...w,...E])},[w]),re=p.useCallback(m=>{const E=w.filter(xe=>xe!==m);T(E)},[w]);let V;return w.length>0||I.length>0||s==="rag"||s==="function-calling"?V=1:k<2?V=20:k===2?V=2.5:k===3?V=2:V=1.5,e.jsxs(_,{ref:f,sx:{minHeight:52,display:"flex",position:"absolute",alignItems:"center",bottom:-64,width:"100%",paddingLeft:h.spacing(1),backgroundColor:h.palette.background.paper,py:.5,boxShadow:O?`0 0 1px 0 ${F(h.palette.mode==="light"?h.palette.grey[500]:h.palette.grey[200],.32)}, 0 1px 10px 2px ${F(h.palette.mode==="light"?h.palette.grey[800]:h.palette.grey[700],.1)}`:`0 0 1px 0 ${F(h.palette.mode==="light"?h.palette.grey[500]:h.palette.grey[200],.32)}, 0 1px 4px -1px ${F(h.palette.mode==="light"?h.palette.grey[800]:h.palette.grey[700],.34)}`,borderRadius:V},children:[e.jsx(On,{chatMode:s,onSetChatMode:n}),e.jsxs(b,{sx:{mr:1},children:[e.jsx(G,{size:"small",onClick:ue,children:e.jsx(A,{icon:Ye,width:22})}),e.jsx(Dn,{openPopover:U,setMessage:g,setOpenPopover:$})]}),e.jsxs(b,{sx:{width:"100%"},alignItems:"center",children:[e.jsx(b,{direction:"row",flexWrap:"wrap",sx:{display:w.length===0?"none":"flex",width:"100%",mt:.75,ml:-1},children:e.jsx(Ot,{thumbnail:!0,files:w,onRemove:m=>re(m),sx:{width:64,height:64},onClick:me})}),e.jsx(b,{spacing:1,direction:"row",flexWrap:"wrap",sx:{display:I.length===0?"none":"flex",width:"100%",mt:.75,mb:.5},children:I.map((m,E)=>e.jsx(fs,{id:E,website:m,onRemoveWebsite:de},E))}),e.jsxs(b,{spacing:1,direction:"row",flexWrap:"wrap",sx:{display:s==="rag"||s==="function-calling"?"flex":"none",width:"100%",mt:.75,mb:.5},children:[s==="rag"&&e.jsx(zn,{kb:D,onOpenKbPopover:H}),s==="function-calling"&&e.jsx(Fn,{selectedTools:l,onOpenToolPopover:J})]}),e.jsx(ot,{className:"llm-input",multiline:!0,maxRows:10,fullWidth:!0,value:j,disableUnderline:!0,onKeyDown:Re,onChange:m=>{g(m.target.value),ce(m)},placeholder:"Enter a prompt",endAdornment:e.jsxs(b,{direction:"row",sx:{mr:1.25,"& > *":{mx:.25}},alignItems:"center",children:[e.jsx(Tt,{onClick:()=>{},disabled:s!=="open-chat",onDrop:ge}),e.jsx(G,{disabled:a,size:"small",onClick:()=>{},children:e.jsx(A,{icon:It,width:20,height:20})}),e.jsx(G,{ref:C,size:"small",sx:{width:30,height:30},onClick:L,children:e.jsx(X,{width:18,icon:"mdi:web-plus"})})]}),sx:{pb:.5}})]}),e.jsx(ve,{orientation:"vertical",flexItem:!0}),e.jsx(ee,{size:"small",variant:"text",color:"primary",onClick:q,disabled:j.trim().length===0||t==="running",startIcon:e.jsx(A,{icon:t==="running"?"carbon:stop-filled":"ic:round-send",width:22,height:22,color:j.trim().length===0?"":We[s]}),sx:{width:38,height:38,minWidth:38,maxWidth:38,borderRadius:5,mx:1,mr:.75,"& .MuiButton-startIcon":{mx:-4}}}),e.jsx(Te,{index:ne.selected,slides:W,open:ne.open,close:ne.onClose}),e.jsx(bs,{url:j.startsWith("#")?j.slice(1):"",moveUpper:I.length>0||s==="rag",anchorWidth:S,openPopover:N,onClosePopover:R,onAddWebsite:oe}),e.jsx(Nn,{searchText:j.slice(1),selectedIndex:o,moveUpper:I.length>0||s==="rag",anchorWidth:S,openPopover:M,onClosePopover:P,onSelectIndex:r}),e.jsx(En,{searchText:j.slice(1),selectedTools:l,moveUpper:I.length>0||s==="function-calling",anchorWidth:S,openPopover:v,onClosePopover:te,onSelectTools:d})]})}const Kn={id:"user",name:"Admin"},vt=[{id:"assistant",name:"GPT"}];function _n({chatStatus:t,chatMode:i,messages:s,configurations:a,selectedIndex:c,selectedToolNames:n,onSetStatus:r,onSelectIndex:d,onSelectTools:l,onSetChatMode:o,onUpdateMessages:h,onOpenRagSourcePopover:f}){const{tools:C}=Oe(),k=C.filter(x=>n.includes(x.id)&&x.meta.trim()!==""),y=C.filter(x=>n.includes(x.id)&&x.meta.trim()!=="").map(x=>JSON.parse(x.meta)),j=a[`${i}-Past messages included`],g=x=>{const{messageId:O,message:I,contentType:B,sources:U,function_calls:$,createdAt:M,senderId:K,mode:N,log_timestamp:z,attachments:v,thoughts:Y}=x,Q={id:O,body:I,contentType:B,sources:U,function_calls:$,createdAt:M,senderId:K,mode:N,chatMode:i,log_timestamp:z,attachments:v,thoughts:Y};h(D=>{const W=D.findIndex(le=>le.id===O);if(!I)return[...D];if(W===-1){if(N==="attach"){if(I.startsWith("(SYS)function")){const me={...D[D.length-1],body:I,function_calls:$};return I.startsWith("(SYS)function executed")&&(r("running"),De({mode:i,onSend:S,request:Ce([...D.slice(0,-1),me],i,j,a,[],y),shouldStream:a[`${i}-Should stream`],aoaiResourceName:a[`${i}-Deployment`],indexName:c,systemPrompt:a[`${i}-System message`],selectedTools:k})),[...D.slice(0,-1),me]}const le=D[D.length-1].function_calls;return[...D.slice(0,-1),{...D[D.length-1],body:I,...Y&&{thoughts:Y},...le&&{function_calls:le}}]}return N==="new"&&I!=="(SYS)Working on it..."&&K==="assistant"?[...D.slice(0,-1),Q]:N==="new"&&K==="user"?(r("running"),De({mode:i,onSend:S,request:Ce([...D,Q],i,j,a,[],y),indexName:c,shouldStream:a[`${i}-Should stream`],aoaiResourceName:a[`${i}-Deployment`],systemPrompt:a[`${i}-System message`],selectedTools:k}),[...D,Q]):[...D,Q]}const ne=[...D];return ne[W]=Q,ne})},w=[vt[0]],T={id:"1",participants:[Kn,vt[0]],type:"ONE_TO_ONE",unreadCount:0,messages:s},S=({content:x,senderId:O,mode:I,sources:B=[],function_calls:U=[],msgId:$=void 0,timestamp:M=void 0,attachments:K=[],thoughts:N=[],status:z="idle"})=>{r(z),g({conversationId:"1",messageId:$===void 0?et():$,message:x,contentType:"text",sources:B,function_calls:U,createdAt:new Date,senderId:O,mode:I,chatMode:i,log_timestamp:M,attachments:K,thoughts:N})};return e.jsxs(b,{sx:{width:1,height:1,overflow:"hidden"},children:[e.jsx($n,{conversation:T,chatMode:i,onSend:S,onSetChatMode:o,onOpenRagSourcePopover:f}),e.jsx(Bn,{disabled:!0,status:t,chatMode:i,onSend:S,participants:w,onSetChatMode:o,onSelectIndex:d,onSelectTools:l,selectedTools:n,selectedKbIndex:c})]})}function Mn({mlApp:t}){const i=Fe(),s=ae(),a=ae(),[c,n]=p.useState(),[r,d]=p.useState("open-chat"),[l,o]=p.useState([]),[h,f]=p.useState("All"),[C,k]=p.useState("idle"),y=i.themeLayout==="horizontal",j=ye(qe),g=j?j.map(W=>W.resourceName):[],w=j?j.filter(W=>W.primary):[],T=w&&w.length>0?w[0].resourceName:"";let S="";T.length>0?S=T:g&&g.length>0&&(S=g[0]);const x=ye(t.id),O=Je(S),[I,B]=p.useState({...O,...x}),[U,$]=p.useState(I.selectedIndex||""),[M,K]=p.useState(I.selectedTools||[]),N=W=>{B(W),be(t.id,W)},z=W=>{$(W),B({...I,selectedIndex:W}),be(t.id,{...I,selectedIndex:W})},v=W=>{K(W),B({...I,selectedTools:W}),be(t.id,{...I,selectedTools:W})},Y=()=>{o([])},Q=W=>{k(W)},D=p.useCallback((W,ne)=>{n(W),f(ne),a.onTrue()},[a]);return e.jsxs(e.Fragment,{children:[e.jsxs(b,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:.5},children:[e.jsx(ee,{to:Me.gbbai.appGallery.root,component:He,size:"small",color:"inherit",startIcon:e.jsx(A,{icon:Ge,style:{marginRight:"-5px"}}),sx:{display:"flex"},children:"Back"}),e.jsxs(b,{direction:"row",alignItems:"center",children:[e.jsx(Qe,{color:"default",sx:{textTransform:"None",mr:1.5},children:I[`${r}-Deployment`]||"No GPT deployment"}),e.jsx(Ue,{title:"Clear histroy",children:e.jsx(G,{size:"small",color:"default",onClick:Y,sx:{width:36,height:36},children:e.jsx(Se,{src:"/assets/icons/modules/ic-sweep.svg",sx:{width:22,height:22}})})}),e.jsx(G,{size:"small",color:"default",onClick:s.onTrue,sx:{width:36,height:36},children:e.jsx(Se,{src:"/static/icons/apps/ic_settings.svg",sx:{width:20,height:20}})})]})]}),e.jsx(_,{sx:{height:y?"calc(100vh - 328px)":"calc(100vh - 204px)",display:"flex",position:"relative",overflow:"visible"},children:e.jsx(_n,{chatStatus:C,onSetStatus:Q,messages:l,onUpdateMessages:o,configurations:I,selectedIndex:U,chatMode:r,onSetChatMode:d,onOpenRagSourcePopover:D,onSelectIndex:z,selectedToolNames:M,onSelectTools:v})}),e.jsx(Ve,{open:s.value,callerId:t.id,onClose:s.onFalse,configurations:I,onUpdate:N,selectedIndex:U,onSelectIndex:z,selectedTools:M,onSelectTools:v}),e.jsx(Ft,{open:a.value,onClose:a.onFalse,ragThoughts:c,selectedSource:h})]})}const Hn=e.jsx(mt,{container:!0,spacing:2,sx:{px:3},children:e.jsxs(mt,{item:!0,xs:12,children:[e.jsx(Le,{variant:"rectangular",width:"100%",height:110,sx:{borderRadius:2,mt:.5,mb:3,px:8}}),e.jsx(Le,{variant:"rectangular",width:"100%",height:"calc(100vh - 320px)",sx:{borderRadius:2,mt:.5,mb:3,px:8}})]})});function Do(){const t=Vt(),{id:i}=t,s=Fe(),{apps:a,appsLoading:c}=Xt(),n=a.find(d=>d.id===i),r=a.filter(d=>d.source==="custom").map(d=>({...d.content&&JSON.parse(d.content),coverUrl:d.cover,category:d.category}));return e.jsxs(e.Fragment,{children:[e.jsx(Jt,{children:e.jsx("title",{children:" GBB/AI: App Gallery"})}),e.jsxs(Qt,{maxWidth:s.themeStretch?"xl":"lg",children:[c&&Hn,!c&&e.jsxs(e.Fragment,{children:[n&&n.source==="built-in"&&(n.title.toLowerCase().includes("data copilot")||n.title.toLowerCase().includes("aoai workbench"))&&e.jsx(Mn,{mlApp:n}),n&&n.source==="built-in"&&n.title.toLowerCase().includes("custom gpts")&&e.jsx(Ks,{id:n.id,customGpts:r}),n&&n.source==="built-in"&&n.title.toLowerCase().includes("manufacturing")&&e.jsx(Rn,{mlApp:n}),n&&n.source==="built-in"&&n.title.toLowerCase().includes("ai data analyzer")&&e.jsx(cn,{mlApp:n})]})]})]})}export{Do as default};

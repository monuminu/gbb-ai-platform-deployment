import{l as _,r as c,a as W,b as Z,j as e,t as xe,S as b,L as pe,I as F,T as L,f as O,c as ue,A as ge,d as $,C as V,M as fe,B as M,e as be,g as ee,p as te,h as A,i as je,k as Ce,N as we,u as ye,n as se,o as ae,P as ke,m as ve,D as H,s as De,q as Te,v as Se,W as Re,w as Ie}from"./index-f7c4dfad.js";import{L as Ae,u as Fe,_ as ze}from"./tool-f255544f.js";import{L as N,_ as Le}from"./plus-fill-f9c9dd5d.js";import{C as Pe,a as ne,f as K}from"./confirm-dialog-e205398d.js";import{_ as oe,a as ie,c as Me,u as Be,d as G}from"./rag-source-dialog-bf54fa9f.js";import{E as We}from"./image-f9ea5de7.js";import{C as Ee,S as Ke}from"./SkeletonBoxTable-cedfa69a.js";import{T as $e,a as Ne,e as _e,b as qe,c as Oe,_ as He,C as Ge,s as Qe,u as Ue,g as Je}from"./custom-date-range-picker-998109e2.js";import{T as Xe,g as Ye}from"./user-ea221cef.js";import{_ as Ze}from"./more-horizontal-fill-3cef82a0.js";import{u as Ve}from"./use-double-click-598668f8.js";import{u as et,F as tt,C as st,a as at}from"./file-manager-copilot-ead7248d.js";import{T as nt,a as z,F as ot,f as it,b as rt,c as lt,d as ct}from"./file-thumbnail-ebe9c7d7.js";import{C as B,D as dt,a as ht,b as mt}from"./DialogContent-12fa3194.js";import{A as xt}from"./AvatarGroup-b5aeb853.js";import{T as pt}from"./TextField-5cd6dfc4.js";import{I as ut,C as gt}from"./numeral-b65a1435.js";import{c as ft,a as Q,b as bt,u as jt,F as Ct,R as wt,o as yt}from"./rhf-autocomplete-204470f7.js";import{C as kt}from"./coming-soon-image-464dfa9d.js";import{R as U}from"./rhf-text-field-2f3dfe59.js";import"./index-8fda52a8.js";import"./arrow-ios-forward-fill-2d56b1a6.js";import"./markdown-e1ecb202.js";import"./use-light-box-1c577ab5.js";import"./Tabs-e58d3a15.js";import"./use-get-message-377020ea.js";import"./api-c77678a4.js";import"./use-messages-scroll-6244af21.js";function vt({row:t,dense:o,selected:i,onEditRow:n,onSelectRow:s,onDeleteRow:x}){const{name:p,createdAt:d,modifiedAt:u,type:a,shared:l,tags:m}=t,{enqueueSnackbar:k}=_(),{copy:w}=et(),[j,I]=c.useState(""),h=W(),T=W(),R=W(),r=Z(),g=c.useCallback(C=>{I(C.target.value)},[]),y=Ve({click:()=>{h.onTrue()},doubleClick:n}),f=c.useCallback(()=>{k("Copied!"),w(t.id)},[w,k,t.id]);return e.jsxs(e.Fragment,{children:[e.jsxs(nt,{selected:i,sx:{...h.value&&{[`& .${xe.root}`]:{color:"text.primary",typography:"subtitle2",bgcolor:"background.default"}}},children:[e.jsx(z,{sx:{pl:2,maxWidth:40,minWidth:40,...!o&&{py:1.25}},children:e.jsx(Pe,{checked:i,onClick:s})}),e.jsx(z,{onClick:y,sx:{maxWidth:640,...!o&&{py:1.25}},children:e.jsxs(b,{direction:"row",alignItems:"center",spacing:1.25,children:[e.jsx(ot,{file:"folder",sx:{width:24,height:24}}),e.jsx(Ae,{disableTypography:!0,primary:e.jsx(pe,{color:"inherit",variant:"subtitle2",onClick:n,sx:{wordBreak:"break-all",cursor:"pointer",display:"-webkit-box",overflow:"hidden",textOverflow:"ellipsis",WebkitBoxOrient:"vertical",WebkitLineClamp:o?1:2},children:p})})]})}),e.jsx(z,{align:"left",onClick:y,sx:{...!o&&{py:1.25}},children:a&&e.jsx(B,{size:"small",color:a.toLowerCase()==="qa"?"primary":"warning",variant:"soft",icon:e.jsx(F,{icon:a.toLowerCase()==="qa"?oe:ie,sx:{width:13,height:13}}),label:a===""?"QA":a,sx:{height:23,pl:.4,textTransform:"uppercase"}})}),e.jsx(z,{onClick:y,sx:{maxWidth:160,whiteSpace:"nowrap",...!o&&{py:1.25}},children:e.jsxs(b,{direction:"row",spacing:1,alignItems:"baseline",children:[e.jsx(L,{variant:"body2",children:O(new Date(d),"dd MMM yyyy")}),e.jsx(L,{variant:"caption",color:"text.secondary",children:O(new Date(d),"p")})]})}),e.jsx(z,{align:"left",onClick:y,sx:{maxWidth:140,color:"text.primary",whiteSpace:"nowrap",...!o&&{py:1.25}},children:m&&m.length>0&&e.jsxs(b,{direction:"row",spacing:.5,children:[e.jsx(B,{size:"small",color:"default",variant:"soft",label:m[0],sx:{height:23,maxWidth:100}}),m.length>1&&e.jsx(B,{size:"small",color:"default",variant:"soft",label:m[1],sx:{height:23}}),m.length>2&&e.jsx(B,{size:"small",color:"info",variant:"soft",label:`+${m.length-1}`,sx:{height:23}})]})}),e.jsx(z,{align:"left",onClick:y,sx:{color:"text.primary",whiteSpace:"nowrap",...!o&&{py:1.25}},children:it(new Date(u),{addSuffix:!0})}),e.jsx(z,{align:"right",onClick:y,sx:{...!o&&{py:1.25}},children:e.jsx(xt,{max:4,sx:{display:"inline-flex",[`& .${ue.avatar}`]:{width:24,height:24,"&:first-of-type":{fontSize:12}}},children:l&&l.map(C=>e.jsx(ge,{alt:C.name,src:C.photo?C.photo:C.avatarUrl},C.id))})}),e.jsx(z,{align:"right",sx:{px:1,pr:2,whiteSpace:"nowrap",...!o&&{py:1.25}},children:e.jsx($,{color:r.open?"inherit":"default",onClick:r.onOpen,children:e.jsx(F,{icon:Ze})})})]}),e.jsx(V,{open:r.open,onClose:r.onClose,arrow:"right-center",sx:{width:160,borderRadius:1},children:e.jsxs(fe,{onClick:()=>{R.onTrue(),r.onClose()},sx:{color:"error.main"},children:[e.jsx(F,{icon:"gravity-ui:trash-bin",width:18}),"Delete"]})}),e.jsx(tt,{open:T.value,shared:l,inviteEmail:j,onChangeInvite:g,onCopyLink:f,onClose:()=>{T.onFalse(),I("")}}),e.jsx(ne,{open:R.value,onClose:R.onFalse,title:"Delete",content:"Are you sure to delete?",action:e.jsx(M,{variant:"contained",color:"error",onClick:x,children:"Delete"})})]})}const Dt=[{id:"name",label:"Title",align:"left",width:280,maxWidth:640},{id:"type",label:"Type",align:"left",width:80},{id:"createdAt",label:"Created",align:"left",width:140},{id:"tags",label:"Tags",align:"left",width:100,maxWidth:120},{id:"modifiedAt",label:"Modified",align:"left",width:100},{id:"shared",label:"Modified by",align:"right",width:120,maxWidth:130},{id:"",width:60,minWidth:40}];function Tt({table:t,tableData:o,notFound:i,onDeleteRow:n,dataFiltered:s,onOpenConfirm:x}){const p=be(),d=ee(),{dense:u,page:a,order:l,orderBy:m,rowsPerPage:k,selected:w,onSelectRow:j,onSelectAllRows:I,onSort:h,onChangeDense:T,onChangePage:R,onChangeRowsPerPage:r}=t,g=u?52:59,y=c.useCallback(f=>{d.push(te.gbbai.kb.details(f))},[d]);return e.jsxs(e.Fragment,{children:[e.jsxs(A,{sx:{position:"relative"},children:[e.jsx(Xe,{dense:u,numSelected:w.length,rowCount:s.length,checkboxMl:0,denseCheckboxMl:0,onSelectAllRows:f=>I(f,s.map(C=>C.id)),action:e.jsx(je,{title:"Delete",children:e.jsx($,{color:"error",onClick:x,children:e.jsx(F,{icon:"gravity-ui:trash-bin",width:18})})}),sx:{pl:2,pr:2}}),e.jsx(rt,{children:e.jsxs(lt,{size:u?"small":"medium",sx:{minWidth:960},children:[e.jsx($e,{dense:u,order:l,checkboxMl:1.1,orderBy:m,headLabel:Dt,rowCount:s.length,numSelected:w.length,onSort:h,onSelectAllRows:f=>I(f,s.map(C=>C.id))}),e.jsxs(ct,{children:[s.slice(a*k,a*k+k).map(f=>e.jsx(vt,{row:f,dense:u,selected:w.includes(f.id),onEditRow:()=>y(f.id),onSelectRow:()=>j(f.id),onDeleteRow:()=>n(f.id)},f.id)),e.jsx(Ne,{height:g,emptyRows:_e(a,k,o.length)}),e.jsx(qe,{notFound:i,sx:{m:-2,borderRadius:1.5,border:`dashed 1px ${p.palette.divider}`}})]})]})})]}),e.jsx(Oe,{count:s.length,page:a,rowsPerPage:k,onPageChange:R,onRowsPerPageChange:r,dense:u,onChangeDense:T,sx:{[`& .${Ce.toolbar}`]:{borderTopColor:"transparent"}}})]})}function St({openDateRange:t,onCloseDateRange:o,onOpenDateRange:i,filters:n,onFilters:s,dateError:x,tagOptions:p}){const d=Z(),u=c.useCallback(h=>{s("name",h.target.value)},[s]),a=c.useCallback(h=>{s("startDate",h)},[s]),l=c.useCallback(h=>{s("endDate",h)},[s]),m=c.useCallback(h=>{const T=n.tags.includes(h)?n.tags.filter(R=>R!==h):[...n.tags,h];s("tags",T)},[n.tags,s]),k=c.useCallback(()=>{d.onClose(),s("tags",[])},[s,d]),w=e.jsx(pt,{size:"small",value:n.name,onChange:u,placeholder:"Search",InputProps:{startAdornment:e.jsx(ut,{position:"start",children:e.jsx(F,{icon:He,sx:{color:"text.disabled"}})})},sx:{width:{xs:1,md:220}}}),j=e.jsxs(e.Fragment,{children:[e.jsx(M,{size:"small",variant:"soft",color:"inherit",onClick:d.onOpen,endIcon:e.jsx(F,{icon:d.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"}),sx:{px:1.5,py:2,borderRadius:8},children:"Tags"}),e.jsx(V,{open:d.open,onClose:d.onClose,sx:{p:2.5},children:e.jsxs(b,{spacing:2.5,children:[e.jsx(A,{gap:1,display:"grid",gridTemplateColumns:{xs:"repeat(2, 1fr)",sm:"repeat(4, 1fr)"},children:p.map(h=>{const T=n.tags.includes(h);return e.jsx(st,{onClick:()=>m(h),sx:{p:1,borderRadius:1,cursor:"pointer",border:R=>`solid 1px ${we(R.palette.grey[500],.08)}`,...T&&{bgcolor:"action.selected"}},children:e.jsx(b,{spacing:1,direction:"row",alignItems:"center",children:e.jsx(L,{variant:T?"subtitle2":"body2",children:h})})},h)})}),e.jsxs(b,{spacing:1.5,direction:"row",alignItems:"center",justifyContent:"flex-end",children:[e.jsx(M,{size:"small",variant:"outlined",color:"inherit",onClick:k,children:"Clear"}),e.jsx(M,{size:"small",variant:"contained",onClick:d.onClose,children:"Apply"})]})]})})]}),I=e.jsxs(e.Fragment,{children:[e.jsx(M,{size:"small",variant:"soft",color:"inherit",onClick:i,endIcon:e.jsx(F,{icon:t?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"}),sx:{px:1.5,py:2,borderRadius:8},children:"Created"}),e.jsx(Ge,{variant:"calendar",startDate:n.startDate,endDate:n.endDate,onChangeStartDate:a,onChangeEndDate:l,open:t,onClose:o,selected:!!n.startDate&&!!n.endDate,error:x})]});return e.jsxs(b,{spacing:2,direction:{xs:"column",md:"row"},alignItems:{xs:"flex-end",md:"center"},justifyContent:"space-between",sx:{width:{xs:1,md:"auto"}},children:[w,e.jsxs(b,{spacing:{xs:2,md:1},direction:"row",alignItems:"center",justifyContent:"flex-end",children:[I,j]})]})}const Rt=De("div")(({theme:t})=>({right:0,bottom:0,zIndex:1999,minHeight:440,outline:"none",display:"flex",position:"fixed",flexDirection:"row",margin:t.spacing(3),boxShadow:t.customShadows.z20,borderRadius:t.shape.borderRadius,backgroundColor:t.palette.background.paper})),J=[{label:"Knowledge base",description:"This handles multiple file formats, builds Azure AI Search indexes, and produces embeddings and chunks. It is particularly tailored for the RAG scenario."},{label:"Question answer",description:"This supports question-answer data and allows the creation of unlimited question-answer flows. It is specifically designed for QA scenarios demanding minimal error margin."}];function It({open:t,onClose:o,onRefresh:i}){const n=ee(),{user:s}=ye(),{enqueueSnackbar:x}=_(),[p,d]=c.useState(J[0].label),[u,a]=c.useState(Date.now()),l=ft().shape({kbName:Q().required("Knowledge base name is required"),indexName:Q().required("Index name is required"),tags:bt()}),m={kbName:`knowledge-${u}`,indexName:`index-${u}`,tags:[]},k=jt({resolver:yt(l),defaultValues:m}),{reset:w,handleSubmit:j,formState:{isSubmitting:I}}=k;c.useEffect(()=>{t&&(a(Date.now()),w(m))},[t,w]);const h=j(async r=>{try{const g=await Ye(s==null?void 0:s.photoURL),y=Fe(),f={id:"1",name:(s==null?void 0:s.displayName)||"Anonymous",email:(s==null?void 0:s.username)||"Anonymous",photo:g||"",permission:"edit",avatarUrl:g?"":"/assets/avatars/avatar_1.jpg"},C={...r,kbId:y,tags:r.tags||[],shared:[f]},P=await Me(C);P&&P.success?(x("Created successfully"),i(),o(),n.push(te.gbbai.kb.details(y))):P&&!P.success&&x(P.message,{variant:"error"})}catch(g){x(g,{variant:"error"})}}),T=c.useCallback(r=>{p!==r&&d(r)},[p]),R=J.map(r=>e.jsxs(b,{spacing:2.5,component:se,variant:"outlined",direction:"row",alignItems:"center",onClick:()=>T(r.label),sx:{p:2.5,py:2,position:"relative",cursor:"pointer",...r.label===p&&{boxShadow:g=>`0 0 0 2px ${g.palette.text.primary}`}},children:[e.jsx(A,{sx:{width:22,height:22},children:e.jsx(ae,{icon:r.label==="Knowledge base"?ie:oe,width:22,height:22})}),e.jsxs(b,{spacing:.5,children:[e.jsx(L,{variant:"subtitle1",component:"div",children:r.label}),e.jsx(L,{variant:"body2",component:"div",color:"text.secondary",children:r.description})]})]},r.label));return e.jsx(ke,{children:e.jsx(Ee,{onClickAway:()=>{},children:e.jsx(dt,{open:t,onClose:o,children:e.jsx(Rt,{sx:{top:0,left:0,display:"flex",margin:"auto",width:{xs:"90%",md:"85%",lg:"75%"},height:{xs:"90vh",md:"80vh"},maxWidth:1100},children:e.jsxs(b,{sx:{width:"100%"},children:[e.jsx(gt,{title:"Create knowledge",sx:{mb:1.5}}),e.jsx(ve,{sx:{flexDirection:"row"},children:e.jsx(Ct,{methods:k,onSubmit:h,children:e.jsxs(A,{sx:{mx:3.5,mt:2,mb:2},children:[e.jsx(A,{sx:{gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"}},children:R}),e.jsx(H,{sx:{my:4},style:{borderStyle:"dashed"}}),p==="Knowledge base"&&e.jsx(b,{sx:{mt:1,mb:3},spacing:3,children:e.jsxs(A,{sx:{display:"grid",gap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(3, 1fr)"}},children:[e.jsx(U,{name:"kbName",label:"Name",fullWidth:!0,size:"medium"}),p==="Knowledge base"&&e.jsx(U,{fullWidth:!0,name:"indexName",label:"Index name",size:"medium"}),e.jsx(wt,{size:"medium",name:"tags",label:"Tags",placeholder:"+ Tags",multiple:!0,freeSolo:!0,autoSelect:!0,options:[],getOptionLabel:r=>r,renderOption:(r,g)=>c.createElement("li",{...r,key:g},g),renderTags:(r,g)=>r.map((y,f)=>c.createElement(B,{...g({index:f}),key:y,label:y,size:"small",color:"info",variant:"soft"}))})]})}),p==="Question answer"&&e.jsxs(b,{sx:{alignItems:"center"},children:[e.jsx(L,{variant:"h4",sx:{my:2},children:"Coming soon"}),e.jsx(L,{sx:{color:"text.secondary"},children:"We are currently working on this"}),e.jsx(kt,{sx:{my:6,height:180}})]})]})})}),e.jsx(H,{}),e.jsxs(ht,{children:[e.jsx(N,{loading:I,disabled:p==="Question answer",type:"submit",variant:"contained",onClick:h,children:"Confirm"}),e.jsx(M,{variant:"outlined",color:"inherit",onClick:o,children:"Cancel"})]})]})})})})})}function At({filters:t,onFilters:o,canReset:i,onResetFilters:n,results:s,...x}){const p=Qe(t.startDate,t.endDate),d=a=>{const l=t.tags.filter(m=>m!==a);o("tags",l)},u=()=>{o("startDate",null),o("endDate",null)};return e.jsxs(b,{spacing:1.5,...x,direction:"row",alignItems:"center",children:[e.jsxs(A,{sx:{typography:"body2"},children:[e.jsx("strong",{children:s}),e.jsx(A,{component:"span",sx:{color:"text.secondary",ml:.75},children:"results found"})]}),e.jsxs(b,{flexGrow:1,spacing:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:[!!t.tags.length&&e.jsx(X,{label:"Tags:",children:t.tags.map(a=>e.jsx(B,{label:a,size:"small",onDelete:()=>d(a)},a))}),t.startDate&&t.endDate&&e.jsx(X,{label:"Date:",children:e.jsx(B,{size:"small",label:p,onDelete:u})}),i&&e.jsx(M,{size:"small",color:"error",onClick:n,startIcon:e.jsx(F,{icon:"gravity-ui:trash-bin",width:18}),children:"Clear"})]})]})}function X({label:t,children:o,sx:i,...n}){return e.jsxs(b,{component:se,variant:"outlined",spacing:1,direction:"row",sx:{p:1,borderRadius:1,overflow:"hidden",borderStyle:"dashed",...i},...n,children:[e.jsx(A,{component:"span",sx:{typography:"subtitle2"},children:t}),e.jsx(b,{spacing:1,direction:"row",flexWrap:"wrap",children:o})]})}const Ft=e.jsx(Ke,{rowNumber:5,sx:{my:3}}),Y={name:"",tags:[],status:"",startDate:null,endDate:null};function zt({refreshKey:t,onRefresh:o}){const i=Ue({defaultRowsPerPage:10,defaultOrderBy:"modifiedAt"}),{enqueueSnackbar:n}=_(),s=W(),x=W(),p=W(),{kmmList:d,isEmpty:u,isLoading:a}=Be(t),[l,m]=c.useState([]),[k,w]=c.useState(!1),[j,I]=c.useState(Y),[h,T]=c.useState(""),R=Array.from(new Set(d.map(v=>v.tags).flat())),r=j.startDate&&j.endDate?j.startDate.getTime()>j.endDate.getTime():!1;c.useEffect(()=>{!a&&!u&&m(d)},[u,d,a]);const g=Lt({inputData:l,comparator:Je(i.order,i.orderBy),filters:j,dateError:r}),y=!!j.name||!!j.tags.length||!!j.startDate&&!!j.endDate,f=!g.length&&y||!g.length,C=g.filter(v=>i.selected.includes(v.id)).map(v=>({id:v.id,name:v.name,type:v.type,index:v.index||"",status:"Indexed"})),P=C.length>0?C[0].index:"",q=c.useCallback((v,D)=>{i.onResetPage(),I(S=>({...S,[v]:D}))},[i]),re=c.useCallback(async v=>{const D=l.filter(S=>S.id===v)[0];try{w(!0);const S=await G(D.id,D.name);w(!1),S&&S.success?(i.setSelected([]),n("Deleted successfully"),o(),x.onFalse()):S&&!S.success&&n(S.message,{variant:"error"})}catch(S){w(!1),n(S,{variant:"error"})}},[i,x,o,l]),le=c.useCallback(async()=>{const v=l.filter(D=>i.selected.includes(D.id));v.length!==0&&(w(!0),Promise.all(v.map(D=>G(D.id,D.index||""))).then(D=>{w(!1);const S=D.filter(E=>!E||!E.success);S.length===0?(n("Deleted successfully"),i.setSelected([]),x.onFalse(),o()):S.forEach(E=>{n(E.message,{variant:"error"})})}).catch(D=>{w(!1),console.error(D),n("An error occurred while deleting",{variant:"error"})}))},[i,x,k,l]),ce=c.useCallback(()=>{I(Y)},[]),de=c.useCallback(()=>{if(C.filter(D=>D.type.toLowerCase()==="qa").length>0){n("Only KB types are supported.",{variant:"info"});return}T("rag")},[C]),he=e.jsx(St,{openDateRange:s.value,onCloseDateRange:s.onFalse,onOpenDateRange:s.onTrue,filters:j,onFilters:q,dateError:r,tagOptions:R}),me=e.jsx(At,{filters:j,onResetFilters:ce,canReset:y,onFilters:q,results:g.length});return e.jsxs(mt,{children:[e.jsxs(b,{spacing:2.5,sx:{mt:{xs:3,md:2.5},mb:{xs:1.5,md:1},mx:3},children:[e.jsxs(b,{spacing:1,alignItems:"center",justifyContent:"space-between",direction:{xs:"column",md:"row"},children:[he,e.jsxs(b,{direction:"row",alignItems:"center",alignSelf:"end",spacing:2,sx:{mt:{xs:.5,md:0},mb:{md:.1}},children:[e.jsx($,{size:"small",onClick:de,children:e.jsx(A,{component:"img",src:"/assets/icons/modules/ic_copilot.svg",sx:{width:26,height:26,cursor:"pointer"}})}),e.jsx(N,{size:"small",variant:"contained",startIcon:e.jsx(ae,{icon:Le}),onClick:p.onTrue,sx:{px:1},children:"Knowledge"})]})]}),y&&me]}),a&&Ft,!a&&e.jsx(e.Fragment,{children:f?e.jsx(We,{filled:!0,title:"No Data",sx:{py:10,m:3,borderRadius:1}}):e.jsx(Tt,{table:i,tableData:l,dataFiltered:g,onDeleteRow:re,notFound:f,onOpenConfirm:x.onTrue})}),e.jsx(at,{indexName:P,open:!!h,selectedKbs:C,onClose:()=>T(""),callBack:()=>{}}),e.jsx(It,{open:p.value,onClose:p.onFalse,onRefresh:o}),e.jsx(ne,{open:x.value,onClose:x.onFalse,title:"Delete?",content:e.jsxs(e.Fragment,{children:["Are you sure to delete ",e.jsxs("strong",{children:[" ",i.selected.length," "]})," items?"]}),action:e.jsx(N,{loading:k,variant:"contained",color:"error",onClick:()=>{le()},children:"Delete"})})]})}function Lt({inputData:t,comparator:o,filters:i,dateError:n}){const{name:s,tags:x,startDate:p,endDate:d}=i,u=t.map((a,l)=>[a,l]);return u.sort((a,l)=>{const m=o(a[0],l[0]);return m!==0?m:a[1]-l[1]}),t=u.map(a=>a[0]),s&&(t=t.filter(a=>a.name.toLowerCase().indexOf(s.toLowerCase())!==-1)),x.length&&(t=t.filter(a=>{var l;return(l=a.tags)==null?void 0:l.some(m=>x.includes(m))})),n||p&&d&&(t=t.filter(a=>K(a.createdAt)>=K(p)&&K(a.createdAt)<=K(d))),t}function ls(){const{t}=Te(),[o,i]=c.useState(0),n=Se(),s=()=>{i(Date.now())};return e.jsxs(e.Fragment,{children:[e.jsx(Re,{children:e.jsx("title",{children:" GBB/AI: KMM"})}),e.jsxs(Ie,{maxWidth:n.themeStretch?!1:"xl",children:[e.jsxs(b,{sx:{mb:2.5},direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(L,{variant:"h4",textTransform:"capitalize",children:t("knowledge_base")}),e.jsx($,{size:"small",onClick:s,sx:{width:32,height:32,color:"inherit"},children:e.jsx(F,{icon:ze})})]}),e.jsx(zt,{refreshKey:o,onRefresh:s})]})]})}export{ls as default};

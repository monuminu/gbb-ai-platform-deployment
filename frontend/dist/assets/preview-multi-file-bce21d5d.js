import{r as l,ah as or,ai as wr,aj as Er,j as h,ak as Ar,al as Fr,am as Or,an as g,ao as jr,S as Ke,a9 as Be,N as ie,d as He,I as We}from"./index-f7c4dfad.js";import{f as Cr}from"./format-number-ad5a4a25.js";import{v as Ue}from"./fade-295cf198.js";import{h as _r,F as Ne}from"./file-thumbnail-ebe9c7d7.js";import{L as Pr}from"./tool-f255544f.js";function ir(){const e=l.useRef(!1);return or(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function Rr(){const e=ir(),[r,t]=l.useState(0),n=l.useCallback(()=>{e.current&&t(r+1)},[r]);return[l.useCallback(()=>wr.postRender(n),[n]),r]}class Sr extends l.Component{getSnapshotBeforeUpdate(r){const t=this.props.childRef.current;if(t&&r.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=t.offsetHeight||0,n.width=t.offsetWidth||0,n.top=t.offsetTop,n.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Ir({children:e,isPresent:r}){const t=l.useId(),n=l.useRef(null),i=l.useRef({width:0,height:0,top:0,left:0}),{nonce:o}=l.useContext(Er);return l.useInsertionEffect(()=>{const{width:s,height:u,top:m,left:c}=i.current;if(r||!n.current||!s||!u)return;n.current.dataset.motionPopId=t;const p=document.createElement("style");return o&&(p.nonce=o),document.head.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${u}px !important;
            top: ${m}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(p)}},[r]),h.jsx(Sr,{isPresent:r,childRef:n,sizeRef:i,children:l.cloneElement(e,{ref:n})})}const De=({children:e,initial:r,isPresent:t,onExitComplete:n,custom:i,presenceAffectsLayout:o,mode:s})=>{const u=Ar(Tr),m=l.useId(),c=l.useMemo(()=>({id:m,initial:r,isPresent:t,custom:i,onExitComplete:p=>{u.set(p,!0);for(const d of u.values())if(!d)return;n&&n()},register:p=>(u.set(p,!1),()=>u.delete(p))}),o?[Math.random()]:[t]);return l.useMemo(()=>{u.forEach((p,d)=>u.set(d,!1))},[t]),l.useEffect(()=>{!t&&!u.size&&n&&n()},[t]),s==="popLayout"&&(e=h.jsx(Ir,{isPresent:t,children:e})),h.jsx(Fr.Provider,{value:c,children:e})};function Tr(){return new Map}function kr(e){return l.useEffect(()=>()=>e(),[])}const z=e=>e.key||"";function Mr(e,r){e.forEach(t=>{const n=z(t);r.set(n,t)})}function zr(e){const r=[];return l.Children.forEach(e,t=>{l.isValidElement(t)&&r.push(t)}),r}const Lr=({children:e,custom:r,initial:t=!0,onExitComplete:n,exitBeforeEnter:i,presenceAffectsLayout:o=!0,mode:s="sync"})=>{const u=l.useContext(Or).forceRender||Rr()[0],m=ir(),c=zr(e);let p=c;const d=l.useRef(new Map).current,_=l.useRef(p),O=l.useRef(new Map).current,P=l.useRef(!0);if(or(()=>{P.current=!1,Mr(c,O),_.current=p}),kr(()=>{P.current=!0,O.clear(),d.clear()}),P.current)return h.jsx(h.Fragment,{children:p.map(b=>h.jsx(De,{isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:o,mode:s,children:b},z(b)))});p=[...p];const R=_.current.map(z),T=c.map(z),Q=R.length;for(let b=0;b<Q;b++){const x=R[b];T.indexOf(x)===-1&&!d.has(x)&&d.set(x,void 0)}return s==="wait"&&d.size&&(p=[]),d.forEach((b,x)=>{if(T.indexOf(x)!==-1)return;const $=O.get(x);if(!$)return;const Y=R.indexOf(x);let k=b;if(!k){const S=()=>{d.delete(x);const K=Array.from(O.keys()).filter(j=>!T.includes(j));if(K.forEach(j=>O.delete(j)),_.current=c.filter(j=>{const I=z(j);return I===x||K.includes(I)}),!d.size){if(m.current===!1)return;u(),n&&n()}};k=h.jsx(De,{isPresent:!1,onExitComplete:S,custom:r,presenceAffectsLayout:o,mode:s,children:$},z($)),d.set(x,k)}p.splice(Y,0,k)}),p=p.map(b=>{const x=b.key;return d.has(x)?b:h.jsx(De,{isPresent:!0,presenceAffectsLayout:o,mode:s,children:b},z(b))}),h.jsx(h.Fragment,{children:d.size?p:p.map(b=>l.cloneElement(b))})};function N(e,r,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function u(p){try{c(n.next(p))}catch(d){s(d)}}function m(p){try{c(n.throw(p))}catch(d){s(d)}}function c(p){p.done?o(p.value):i(p.value).then(u,m)}c((n=n.apply(e,r||[])).next())})}function G(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(c){return function(p){return m([c,p])}}function m(c){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(t=0)),t;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){t.label=c[1];break}if(c[0]===6&&t.label<o[1]){t.label=o[1],o=c;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(c);break}o[2]&&t.ops.pop(),t.trys.pop();continue}c=r.call(e,t)}catch(p){c=[6,p],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Ge(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],s;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){s={error:u}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return o}function Ye(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return e.concat(o||Array.prototype.slice.call(r))}var $r=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function J(e,r){var t=Kr(e);if(typeof t.path!="string"){var n=e.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof r=="string"?r:typeof n=="string"&&n.length>0?n:e.name,writable:!1,configurable:!1,enumerable:!0})}return t}function Kr(e){var r=e.name,t=r&&r.lastIndexOf(".")!==-1;if(t&&!e.type){var n=r.split(".").pop().toLowerCase(),i=$r.get(n);i&&Object.defineProperty(e,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return e}var Br=[".DS_Store","Thumbs.db"];function Hr(e){return N(this,void 0,void 0,function(){return G(this,function(r){return se(e)&&Wr(e.dataTransfer)?[2,Yr(e.dataTransfer,e.type)]:Ur(e)?[2,Nr(e)]:Array.isArray(e)&&e.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,Gr(e)]:[2,[]]})})}function Wr(e){return se(e)}function Ur(e){return se(e)&&se(e.target)}function se(e){return typeof e=="object"&&e!==null}function Nr(e){return we(e.target.files).map(function(r){return J(r)})}function Gr(e){return N(this,void 0,void 0,function(){var r;return G(this,function(t){switch(t.label){case 0:return[4,Promise.all(e.map(function(n){return n.getFile()}))];case 1:return r=t.sent(),[2,r.map(function(n){return J(n)})]}})})}function Yr(e,r){return N(this,void 0,void 0,function(){var t,n;return G(this,function(i){switch(i.label){case 0:return e.items?(t=we(e.items).filter(function(o){return o.kind==="file"}),r!=="drop"?[2,t]:[4,Promise.all(t.map(qr))]):[3,2];case 1:return n=i.sent(),[2,qe(ar(n))];case 2:return[2,qe(we(e.files).map(function(o){return J(o)}))]}})})}function qe(e){return e.filter(function(r){return Br.indexOf(r.name)===-1})}function we(e){if(e===null)return[];for(var r=[],t=0;t<e.length;t++){var n=e[t];r.push(n)}return r}function qr(e){if(typeof e.webkitGetAsEntry!="function")return Ve(e);var r=e.webkitGetAsEntry();return r&&r.isDirectory?sr(r):Ve(e)}function ar(e){return e.reduce(function(r,t){return Ye(Ye([],Ge(r),!1),Ge(Array.isArray(t)?ar(t):[t]),!1)},[])}function Ve(e){var r=e.getAsFile();if(!r)return Promise.reject("".concat(e," is not a File"));var t=J(r);return Promise.resolve(t)}function Vr(e){return N(this,void 0,void 0,function(){return G(this,function(r){return[2,e.isDirectory?sr(e):Jr(e)]})})}function sr(e){var r=e.createReader();return new Promise(function(t,n){var i=[];function o(){var s=this;r.readEntries(function(u){return N(s,void 0,void 0,function(){var m,c,p;return G(this,function(d){switch(d.label){case 0:if(u.length)return[3,5];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return m=d.sent(),t(m),[3,4];case 3:return c=d.sent(),n(c),[3,4];case 4:return[3,6];case 5:p=Promise.all(u.map(Vr)),i.push(p),o(),d.label=6;case 6:return[2]}})})},function(u){n(u)})}o()})}function Jr(e){return N(this,void 0,void 0,function(){return G(this,function(r){return[2,new Promise(function(t,n){e.file(function(i){var o=J(i,e.fullPath);t(o)},function(i){n(i)})})]})})}var Qr=function(e,r){if(e&&r){var t=Array.isArray(r)?r:r.split(","),n=e.name||"",i=(e.type||"").toLowerCase(),o=i.replace(/\/.*$/,"");return t.some(function(s){var u=s.trim().toLowerCase();return u.charAt(0)==="."?n.toLowerCase().endsWith(u):u.endsWith("/*")?o===u.replace(/\/.*$/,""):i===u})}return!0};function Je(e){return et(e)||Zr(e)||cr(e)||Xr()}function Xr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zr(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function et(e){if(Array.isArray(e))return Ee(e)}function Qe(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,n)}return t}function Xe(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Qe(Object(t),!0).forEach(function(n){ur(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Qe(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function ur(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function V(e,r){return nt(e)||tt(e,r)||cr(e,r)||rt()}function rt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cr(e,r){if(e){if(typeof e=="string")return Ee(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ee(e,r)}}function Ee(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function tt(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],i=!0,o=!1,s,u;try{for(t=t.call(e);!(i=(s=t.next()).done)&&(n.push(s.value),!(r&&n.length===r));i=!0);}catch(m){o=!0,u=m}finally{try{!i&&t.return!=null&&t.return()}finally{if(o)throw u}}return n}}function nt(e){if(Array.isArray(e))return e}var ot="file-invalid-type",it="file-too-large",at="file-too-small",st="too-many-files",ut=function(r){r=Array.isArray(r)&&r.length===1?r[0]:r;var t=Array.isArray(r)?"one of ".concat(r.join(", ")):r;return{code:ot,message:"File type must be ".concat(t)}},Ze=function(r){return{code:it,message:"File is larger than ".concat(r," ").concat(r===1?"byte":"bytes")}},er=function(r){return{code:at,message:"File is smaller than ".concat(r," ").concat(r===1?"byte":"bytes")}},ct={code:st,message:"Too many files"};function lr(e,r){var t=e.type==="application/x-moz-file"||Qr(e,r);return[t,t?null:ut(r)]}function fr(e,r,t){if(L(e.size))if(L(r)&&L(t)){if(e.size>t)return[!1,Ze(t)];if(e.size<r)return[!1,er(r)]}else{if(L(r)&&e.size<r)return[!1,er(r)];if(L(t)&&e.size>t)return[!1,Ze(t)]}return[!0,null]}function L(e){return e!=null}function lt(e){var r=e.files,t=e.accept,n=e.minSize,i=e.maxSize,o=e.multiple,s=e.maxFiles,u=e.validator;return!o&&r.length>1||o&&s>=1&&r.length>s?!1:r.every(function(m){var c=lr(m,t),p=V(c,1),d=p[0],_=fr(m,n,i),O=V(_,1),P=O[0],R=u?u(m):null;return d&&P&&!R})}function ue(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function ae(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(r){return r==="Files"||r==="application/x-moz-file"}):!!e.target&&!!e.target.files}function rr(e){e.preventDefault()}function ft(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function pt(e){return e.indexOf("Edge/")!==-1}function dt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return ft(e)||pt(e)}function C(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(n){for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return r.some(function(u){return!ue(n)&&u&&u.apply(void 0,[n].concat(o)),ue(n)})}}function mt(){return"showOpenFilePicker"in window}function gt(e){if(L(e)){var r=Object.entries(e).filter(function(t){var n=V(t,2),i=n[0],o=n[1],s=!0;return pr(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),s=!1),(!Array.isArray(o)||!o.every(dr))&&(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),s=!1),s}).reduce(function(t,n){var i=V(n,2),o=i[0],s=i[1];return Xe(Xe({},t),{},ur({},o,s))},{});return[{description:"Files",accept:r}]}return e}function yt(e){if(L(e))return Object.entries(e).reduce(function(r,t){var n=V(t,2),i=n[0],o=n[1];return[].concat(Je(r),[i],Je(o))},[]).filter(function(r){return pr(r)||dr(r)}).join(",")}function vt(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function ht(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function pr(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function dr(e){return/^.*\.[\w]+$/.test(e)}var bt=["children"],Dt=["open"],xt=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],wt=["refKey","onChange","onClick"];function Et(e){return Ot(e)||Ft(e)||mr(e)||At()}function At(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ft(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ot(e){if(Array.isArray(e))return Ae(e)}function xe(e,r){return _t(e)||Ct(e,r)||mr(e,r)||jt()}function jt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mr(e,r){if(e){if(typeof e=="string")return Ae(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ae(e,r)}}function Ae(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function Ct(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],i=!0,o=!1,s,u;try{for(t=t.call(e);!(i=(s=t.next()).done)&&(n.push(s.value),!(r&&n.length===r));i=!0);}catch(m){o=!0,u=m}finally{try{!i&&t.return!=null&&t.return()}finally{if(o)throw u}}return n}}function _t(e){if(Array.isArray(e))return e}function tr(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,n)}return t}function y(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?tr(Object(t),!0).forEach(function(n){Fe(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):tr(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Fe(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ce(e,r){if(e==null)return{};var t=Pt(e,r),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}function Pt(e,r){if(e==null)return{};var t={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(r.indexOf(i)>=0)&&(t[i]=e[i]);return t}var je=l.forwardRef(function(e,r){var t=e.children,n=ce(e,bt),i=Rt(n),o=i.open,s=ce(i,Dt);return l.useImperativeHandle(r,function(){return{open:o}},[o]),jr.createElement(l.Fragment,null,t(y(y({},s),{},{open:o})))});je.displayName="Dropzone";var gr={disabled:!1,getFilesFromEvent:Hr,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};je.defaultProps=gr;je.propTypes={children:g.func,accept:g.objectOf(g.arrayOf(g.string)),multiple:g.bool,preventDropOnDocument:g.bool,noClick:g.bool,noKeyboard:g.bool,noDrag:g.bool,noDragEventsBubbling:g.bool,minSize:g.number,maxSize:g.number,maxFiles:g.number,disabled:g.bool,getFilesFromEvent:g.func,onFileDialogCancel:g.func,onFileDialogOpen:g.func,useFsAccessApi:g.bool,autoFocus:g.bool,onDragEnter:g.func,onDragLeave:g.func,onDragOver:g.func,onDrop:g.func,onDropAccepted:g.func,onDropRejected:g.func,onError:g.func,validator:g.func};var Oe={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Rt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=y(y({},gr),e),t=r.accept,n=r.disabled,i=r.getFilesFromEvent,o=r.maxSize,s=r.minSize,u=r.multiple,m=r.maxFiles,c=r.onDragEnter,p=r.onDragLeave,d=r.onDragOver,_=r.onDrop,O=r.onDropAccepted,P=r.onDropRejected,R=r.onFileDialogCancel,T=r.onFileDialogOpen,Q=r.useFsAccessApi,b=r.autoFocus,x=r.preventDropOnDocument,$=r.noClick,Y=r.noKeyboard,k=r.noDrag,S=r.noDragEventsBubbling,K=r.onError,j=r.validator,I=l.useMemo(function(){return yt(t)},[t]),Ce=l.useMemo(function(){return gt(t)},[t]),le=l.useMemo(function(){return typeof T=="function"?T:nr},[T]),X=l.useMemo(function(){return typeof R=="function"?R:nr},[R]),w=l.useRef(null),F=l.useRef(null),yr=l.useReducer(St,Oe),_e=xe(yr,2),fe=_e[0],E=_e[1],vr=fe.isFocused,Pe=fe.isFileDialogActive,Z=l.useRef(typeof window<"u"&&window.isSecureContext&&Q&&mt()),Re=function(){!Z.current&&Pe&&setTimeout(function(){if(F.current){var f=F.current.files;f.length||(E({type:"closeDialog"}),X())}},300)};l.useEffect(function(){return window.addEventListener("focus",Re,!1),function(){window.removeEventListener("focus",Re,!1)}},[F,Pe,X,Z]);var B=l.useRef([]),Se=function(f){w.current&&w.current.contains(f.target)||(f.preventDefault(),B.current=[])};l.useEffect(function(){return x&&(document.addEventListener("dragover",rr,!1),document.addEventListener("drop",Se,!1)),function(){x&&(document.removeEventListener("dragover",rr),document.removeEventListener("drop",Se))}},[w,x]),l.useEffect(function(){return!n&&b&&w.current&&w.current.focus(),function(){}},[w,b,n]);var M=l.useCallback(function(a){K?K(a):console.error(a)},[K]),Ie=l.useCallback(function(a){a.preventDefault(),a.persist(),ne(a),B.current=[].concat(Et(B.current),[a.target]),ae(a)&&Promise.resolve(i(a)).then(function(f){if(!(ue(a)&&!S)){var v=f.length,D=v>0&&lt({files:f,accept:I,minSize:s,maxSize:o,multiple:u,maxFiles:m,validator:j}),A=v>0&&!D;E({isDragAccept:D,isDragReject:A,isDragActive:!0,type:"setDraggedFiles"}),c&&c(a)}}).catch(function(f){return M(f)})},[i,c,M,S,I,s,o,u,m,j]),Te=l.useCallback(function(a){a.preventDefault(),a.persist(),ne(a);var f=ae(a);if(f&&a.dataTransfer)try{a.dataTransfer.dropEffect="copy"}catch{}return f&&d&&d(a),!1},[d,S]),ke=l.useCallback(function(a){a.preventDefault(),a.persist(),ne(a);var f=B.current.filter(function(D){return w.current&&w.current.contains(D)}),v=f.indexOf(a.target);v!==-1&&f.splice(v,1),B.current=f,!(f.length>0)&&(E({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),ae(a)&&p&&p(a))},[w,p,S]),ee=l.useCallback(function(a,f){var v=[],D=[];a.forEach(function(A){var q=lr(A,I),U=xe(q,2),de=U[0],me=U[1],ge=fr(A,s,o),oe=xe(ge,2),ye=oe[0],ve=oe[1],he=j?j(A):null;if(de&&ye&&!he)v.push(A);else{var be=[me,ve];he&&(be=be.concat(he)),D.push({file:A,errors:be.filter(function(xr){return xr})})}}),(!u&&v.length>1||u&&m>=1&&v.length>m)&&(v.forEach(function(A){D.push({file:A,errors:[ct]})}),v.splice(0)),E({acceptedFiles:v,fileRejections:D,type:"setFiles"}),_&&_(v,D,f),D.length>0&&P&&P(D,f),v.length>0&&O&&O(v,f)},[E,u,I,s,o,m,_,O,P,j]),re=l.useCallback(function(a){a.preventDefault(),a.persist(),ne(a),B.current=[],ae(a)&&Promise.resolve(i(a)).then(function(f){ue(a)&&!S||ee(f,a)}).catch(function(f){return M(f)}),E({type:"reset"})},[i,ee,M,S]),H=l.useCallback(function(){if(Z.current){E({type:"openDialog"}),le();var a={multiple:u,types:Ce};window.showOpenFilePicker(a).then(function(f){return i(f)}).then(function(f){ee(f,null),E({type:"closeDialog"})}).catch(function(f){vt(f)?(X(f),E({type:"closeDialog"})):ht(f)?(Z.current=!1,F.current?(F.current.value=null,F.current.click()):M(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):M(f)});return}F.current&&(E({type:"openDialog"}),le(),F.current.value=null,F.current.click())},[E,le,X,Q,ee,M,Ce,u]),Me=l.useCallback(function(a){!w.current||!w.current.isEqualNode(a.target)||(a.key===" "||a.key==="Enter"||a.keyCode===32||a.keyCode===13)&&(a.preventDefault(),H())},[w,H]),ze=l.useCallback(function(){E({type:"focus"})},[]),Le=l.useCallback(function(){E({type:"blur"})},[]),$e=l.useCallback(function(){$||(dt()?setTimeout(H,0):H())},[$,H]),W=function(f){return n?null:f},pe=function(f){return Y?null:W(f)},te=function(f){return k?null:W(f)},ne=function(f){S&&f.stopPropagation()},hr=l.useMemo(function(){return function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=a.refKey,v=f===void 0?"ref":f,D=a.role,A=a.onKeyDown,q=a.onFocus,U=a.onBlur,de=a.onClick,me=a.onDragEnter,ge=a.onDragOver,oe=a.onDragLeave,ye=a.onDrop,ve=ce(a,xt);return y(y(Fe({onKeyDown:pe(C(A,Me)),onFocus:pe(C(q,ze)),onBlur:pe(C(U,Le)),onClick:W(C(de,$e)),onDragEnter:te(C(me,Ie)),onDragOver:te(C(ge,Te)),onDragLeave:te(C(oe,ke)),onDrop:te(C(ye,re)),role:typeof D=="string"&&D!==""?D:"presentation"},v,w),!n&&!Y?{tabIndex:0}:{}),ve)}},[w,Me,ze,Le,$e,Ie,Te,ke,re,Y,k,n]),br=l.useCallback(function(a){a.stopPropagation()},[]),Dr=l.useMemo(function(){return function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=a.refKey,v=f===void 0?"ref":f,D=a.onChange,A=a.onClick,q=ce(a,wt),U=Fe({accept:I,multiple:u,type:"file",style:{display:"none"},onChange:W(C(D,re)),onClick:W(C(A,br)),tabIndex:-1},v,F);return y(y({},U),q)}},[F,t,u,re,n]);return y(y({},fe),{},{isFocused:vr&&!n,getRootProps:hr,getInputProps:Dr,rootRef:w,inputRef:F,open:W(H)})}function St(e,r){switch(r.type){case"focus":return y(y({},e),{},{isFocused:!0});case"blur":return y(y({},e),{},{isFocused:!1});case"openDialog":return y(y({},Oe),{},{isFileDialogActive:!0});case"closeDialog":return y(y({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return y(y({},e),{},{isDragActive:r.isDragActive,isDragAccept:r.isDragAccept,isDragReject:r.isDragReject});case"setFiles":return y(y({},e),{},{acceptedFiles:r.acceptedFiles,fileRejections:r.fileRejections});case"reset":return y({},Oe);default:return e}}function nr(){}function Lt({thumbnail:e,files:r,onRemove:t,onClick:n,imageView:i=!0,sx:o}){return h.jsx(Lr,{initial:!1,children:r==null?void 0:r.map(s=>{const{key:u,name:m="",size:c=0}=_r(s),p=typeof s=="string";return e?h.jsxs(Ke,{component:Be.div,...Ue().inUp,alignItems:"center",display:"inline-flex",justifyContent:"center",sx:{m:.5,width:80,height:80,borderRadius:1.25,overflow:"hidden",position:"relative",border:d=>`solid 1px ${ie(d.palette.grey[500],.16)}`,...o},children:[h.jsx(Ne,{tooltip:!0,imageView:i,file:s,sx:{position:"absolute"},imgSx:{position:"absolute"},onClick:n}),t&&h.jsx(He,{size:"small",onClick:()=>t(s),sx:{p:.5,top:4,right:4,position:"absolute",color:"common.white",bgcolor:d=>ie(d.palette.grey[900],.48),"&:hover":{bgcolor:d=>ie(d.palette.grey[900],.72)}},children:h.jsx(We,{icon:"mingcute:close-line",width:14})})]},u):h.jsxs(Ke,{component:Be.div,...Ue().inUp,spacing:2,direction:"row",alignItems:"center",sx:{my:1,py:1,px:1.5,borderRadius:1,border:d=>`solid 1px ${ie(d.palette.grey[500],.16)}`,...o},children:[h.jsx(Ne,{file:s}),h.jsx(Pr,{primary:p?s:m,secondary:p?"":Cr(c),secondaryTypographyProps:{component:"span",typography:"caption"}}),t&&h.jsx(He,{size:"small",onClick:()=>t(s),children:h.jsx(We,{icon:"mingcute:close-line",width:16})})]},u)})})}export{Lt as M,Rt as u};
